parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"D9Nj":[function(require,module,exports) {

},{}],"Oi/k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.names=r,exports.tokenize=s,exports.props=a,exports.name=f,exports.pc=m,exports.midi=d,exports.freq=b,exports.freqToMidi=y,exports.chroma=A,exports.oct=q,exports.stepToLetter=C,exports.altToAcc=G,exports.fromProps=v,exports.fromMidi=z,exports.simplify=D,exports.enharmonic=O,exports.midiToFreq=exports.default=void 0;var t={tokenize:s,props:a,name:f,names:r,pc:m,oct:q,chroma:A,midi:d,freq:b,fromMidi:z,freqToMidi:y,altToAcc:G,stepToLetter:C,fromProps:v,simplify:D,enharmonic:O};exports.default=t;const e="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" ");function r(t={}){return e.filter(e=>!1!==t.unaltered&&void 0===e[1]||!0===t.flats&&"b"===e[1]||!0===t.sharps&&"#"===e[1])}const n=r({sharps:!0}),o=r({flats:!0}),c=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function s(t){"string"!=typeof t&&(t="");const e=c.exec(t);return e?[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]:null}const l=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),u=[0,2,4,5,7,9,11],i=t=>{const e=s(t);if(""===e[0]||""!==e[3])return l;const[r,n,o]=e,c={letter:r,acc:n,octStr:o};return c.pc=c.letter+c.acc,c.name=c.pc+o,c.step=(c.letter.charCodeAt(0)+3)%7,c.alt="b"===c.acc[0]?-c.acc.length:c.acc.length,c.oct=o.length?+o:null,c.chroma=(u[c.step]+c.alt+120)%12,c.midi=null!==c.oct?u[c.step]+c.alt+12*(c.oct+1):null,c.freq=x(c.midi),Object.freeze(c)};let p={};function a(t){return p[t]||(p[t]=i(t))}function f(t){return a(t).name}function m(t){return a(t).pc}const h=t=>t>=0&&t<=127;function d(t){if("number"!=typeof t&&"string"!=typeof t)return null;const e=a(t).midi,r=e||0===e?e:+t;return h(r)?r:null}const x=(t,e=440)=>"number"==typeof t?Math.pow(2,(t-69)/12)*e:null;function b(t){return a(t).freq||x(t)}exports.midiToFreq=x;const M=Math.log(2),g=Math.log(440);function y(t){const e=12*(Math.log(t)-g)/M+69;return Math.round(100*e)/100}function A(t){return a(t).chroma}function q(t){return a(t).oct}const T="CDEFGAB";function C(t){return T[t]}const j=(t,e)=>Array(e+1).join(t),F=(t,e)=>"number"!=typeof t?"":e(t);function G(t){return F(t,t=>t<0?j("b",-t):j("#",t))}function v(t={},e=null){const{step:r,alt:n,oct:o}=e?Object.assign({},a(e),t):t,c=C(r);if(!c)return null;const s=c+G(n);return o||0===o?s+o:s}function z(t,e={}){t=Math.round(t);const r=(!0===e.sharps?n:o)[t%12];return e.pitchClass?r:r+(Math.floor(t/12)-1)}function D(t,e={}){const{alt:r,chroma:n,midi:o}=a(t);return null===n?null:z(o||n,{sharps:!1===e.sameAccType?r<0:r>0,pitchClass:null===o})}function O(t){return D(t,!1)}
},{}],"bTgq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var m=[["1P 3M 5P","major","M "],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69"],["1P 3M 5P 7M 11A","lydian","maj#4 Δ#4 Δ#11"],["1P 3M 6m 7M","major seventh b6","M7b6"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 m/M7 -Δ7 mΔ"],["1P 3m 5P 6M","minor sixth","m6"],["1P 3m 5P 7m 9M","minor ninth","m9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant b9","7b9"],["1P 3M 5P 7m 9A","dominant #9","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended 4th","sus4"],["1P 2M 5P","suspended 2nd","sus2"],["1P 4P 5P 7m","suspended 4th seventh","7sus4"],["1P 5P 7m 9M 11P","eleventh","11 sus Bb/C for C11"],["1P 4P 5P 7m 9m","suspended 4th b9","b9sus phryg"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5"],["1P 3M 5P 7M 9M 11A","major #11 (lydian)","maj9#11 Δ9#11"],["1P 3M 5P 7m 9A","dominant #9","7#9"],["1P 2M 4P 5P",null,"sus24 sus4add9"],["1P 3M 13m",null,"Mb6"],["1P 3M 5A 7M 9M",null,"maj9#5 Maj9#5"],["1P 3M 5A 7m",null,"7#5 +7 7aug aug7"],["1P 3M 5A 7m 9A",null,"7#5#9 7alt 7#5#9_ 7#9b13_"],["1P 3M 5A 7m 9M",null,"9#5 9+"],["1P 3M 5A 7m 9M 11A",null,"9#5#11"],["1P 3M 5A 7m 9m",null,"7#5b9"],["1P 3M 5A 7m 9m 11A",null,"7#5b9#11"],["1P 3M 5A 9A",null,"+add#9"],["1P 3M 5A 9M",null,"M#5add9 +add9"],["1P 3M 5P 6M 11A",null,"M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M",null,"M7add13"],["1P 3M 5P 6M 9M 11A",null,"69#11"],["1P 3M 5P 6m 7m",null,"7b6"],["1P 3M 5P 7M 9A 11A",null,"maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M",null,"M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m",null,"M7b9"],["1P 3M 5P 7m 11A 13m",null,"7#11b13 7b5b13"],["1P 3M 5P 7m 13M",null,"7add6 67 7add13"],["1P 3M 5P 7m 9A 11A",null,"7#9#11 7b5#9"],["1P 3M 5P 7m 9A 11A 13M",null,"13#9#11"],["1P 3M 5P 7m 9A 11A 13m",null,"7#9#11b13"],["1P 3M 5P 7m 9A 13M",null,"13#9 13#9_"],["1P 3M 5P 7m 9A 13m",null,"7#9b13"],["1P 3M 5P 7m 9M 11A",null,"9#11 9+4 9#4 9#11_ 9#4_"],["1P 3M 5P 7m 9M 11A 13M",null,"13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m",null,"9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A",null,"7b9#11 7b5b9"],["1P 3M 5P 7m 9m 11A 13M",null,"13b9#11"],["1P 3M 5P 7m 9m 11A 13m",null,"7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M",null,"13b9"],["1P 3M 5P 7m 9m 13m",null,"7b9b13"],["1P 3M 5P 7m 9m 9A",null,"7b9#9"],["1P 3M 5P 9M",null,"Madd9 2 add9 add2"],["1P 3M 5P 9m",null,"Maddb9"],["1P 3M 5d",null,"Mb5"],["1P 3M 5d 6M 7m 9M",null,"13b5"],["1P 3M 5d 7M",null,"M7b5"],["1P 3M 5d 7M 9M",null,"M9b5"],["1P 3M 5d 7m",null,"7b5"],["1P 3M 5d 7m 9M",null,"9b5"],["1P 3M 7m",null,"7no5"],["1P 3M 7m 13m",null,"7b13"],["1P 3M 7m 9M",null,"9no5"],["1P 3M 7m 9M 13M",null,"13no5"],["1P 3M 7m 9M 13m",null,"9b13"],["1P 3m 4P 5P",null,"madd4"],["1P 3m 5A",null,"m#5 m+ mb6"],["1P 3m 5P 6M 9M",null,"m69 _69"],["1P 3m 5P 6m 7M",null,"mMaj7b6"],["1P 3m 5P 6m 7M 9M",null,"mMaj9b6"],["1P 3m 5P 7M 9M",null,"mMaj9 -Maj9"],["1P 3m 5P 7m 11P",null,"m7add11 m7add4"],["1P 3m 5P 9M",null,"madd9"],["1P 3m 5d 6M 7M",null,"o7M7"],["1P 3m 5d 7M",null,"oM7"],["1P 3m 5d 7m",null,"m7b5 half-diminished h7 _7b5"],["1P 3m 6m 7M",null,"mb6M7"],["1P 3m 6m 7m",null,"m7#5"],["1P 3m 6m 7m 9M",null,"m9#5"],["1P 3m 6m 7m 9M 11P",null,"m11A"],["1P 3m 6m 9m",null,"mb6b9"],["1P 3m 7m 12d 2M",null,"m9b5 h9 -9b5"],["1P 3m 7m 12d 2M 4P",null,"m11b5 h11 _11b5"],["1P 4P 5A 7M",null,"M7#5sus4"],["1P 4P 5A 7M 9M",null,"M9#5sus4"],["1P 4P 5A 7m",null,"7#5sus4"],["1P 4P 5P 7M",null,"M7sus4"],["1P 4P 5P 7M 9M",null,"M9sus4"],["1P 4P 5P 7m 9M",null,"9sus4 9sus"],["1P 4P 5P 7m 9M 13M",null,"13sus4 13sus"],["1P 4P 5P 7m 9m 13m",null,"7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m",null,"4 quartal"],["1P 5P 7m 9m 11P",null,"11b9"]];exports.default=m;
},{}],"V9PQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.names=i,exports.tokenize=m,exports.props=x,exports.num=h,exports.name=y,exports.semitones=v,exports.chroma=b,exports.ic=g,exports.fromProps=A,exports.simplify=q,exports.invert=j,exports.fromSemitones=$,exports.default=void 0;var t={tokenize:m,props:x,simplify:q,invert:j,names:i,num:h,name:y,fromProps:A,chroma:b,ic:g,semitones:v,fromSemitones:$};exports.default=t;const e="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",n="(AA|A|P|M|m|d|dd)([-+]?\\d+)",r=new RegExp("^"+e+"|"+n+"$"),o=[0,2,4,5,7,9,11],s="PMMPPMM",u=[0,1,2,3,4,5,6,5,4,3,2,1],l="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" ");function i(t){return"string"!=typeof t?l.slice():l.filter(e=>-1!==t.indexOf(e[1]))}function m(t){const e=r.exec(t);return null===e?null:e[1]?[e[1],e[2]]:[e[4],e[3]]}const p=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null}),c=(t,e)=>Array(Math.abs(e)+1).join(t),a=(t,e)=>"M"===e&&"M"===t?0:"P"===e&&"P"===t?0:"m"===e&&"M"===t?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?"P"===t?-e.length:-e.length-1:null,f=(t,e)=>0===e?"M"===t?"M":"P":-1===e&&"M"===t?"m":e>0?c("A",e):e<0?c("d","P"===t?e:e+1):null,M=t=>(Math.abs(t)-1)%7,d=t=>{const e=m(t);if(null===e)return p;const n={num:+e[0],q:e[1]};return n.step=M(n.num),n.type=s[n.step],"M"===n.type&&"P"===n.q?p:(n.name=""+n.num+n.q,n.dir=n.num<0?-1:1,n.simple=8===n.num||-8===n.num?n.num:n.dir*(n.step+1),n.alt=a(n.type,n.q),n.oct=Math.floor((Math.abs(n.num)-1)/7),n.semitones=n.dir*(o[n.step]+n.alt+12*n.oct),n.chroma=(n.dir*(o[n.step]+n.alt)%12+12)%12,Object.freeze(n))},P={};function x(t){return"string"!=typeof t?p:P[t]||(P[t]=d(t))}function h(t){return x(t).num}function y(t){return x(t).name}function v(t){return x(t).semitones}function b(t){return x(t).chroma}function g(t){return"string"==typeof t&&(t=x(t).chroma),"number"==typeof t?u[t%12]:null}function A({num:t,step:e,alt:n,oct:r=1,dir:o}={}){if(void 0!==e&&(t=e+1+7*r),void 0===t)return null;const u=o<0?"-":"",l=s[M(t)];return u+t+f(l,n)}function q(t){const e=x(t);return e===p?null:e.simple+e.q}function j(t){const e=x(t);return e===p?null:A({step:(7-e.step)%7,alt:"P"===e.type?-e.alt:-(e.alt+1),oct:e.oct,dir:e.dir})}var z=[1,2,2,3,3,4,5,5,6,6,7,7],O="P m M m M P d P m M m M".split(" ");function $(t){var e=t<0?-1:1,n=Math.abs(t),r=n%12,o=Math.floor(n/12);return e*(z[r]+7*o)+O[r]}
},{}],"GVuH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=s,exports.range=u,exports.rotate=c,exports.compact=i,exports.sort=f,exports.sortedUniq=l,exports.shuffle=p,exports.permutations=d,exports.default=void 0;var t=require("../note");const r=Array.isArray;var e={range:u,rotate:c,compact:i,sort:f,sortedUniq:l,shuffle:p,permutations:d};function n(t,r){const e=[];for(;r--;e[r]=r+t);return e}function o(t,r){const e=[];for(;r--;e[r]=t-r);return e}function s(t,e="Must be an array."){if(!r(t))throw Error(e+" Was: "+t)}function u(t,r){return null===t||null===r?[]:t<r?n(t,r-t+1):o(t,t-r+1)}function c(t,r){const e=r.length,n=(t%e+e)%e;return r.slice(n,e).concat(r.slice(0,n))}function i(t){return t.filter(t=>0===t||t)}exports.default=e;const a=r=>{const e=(0,t.props)(r).midi;return null!==e?e:(0,t.props)(r+"-100").midi};function f(r){return i(r.map(t.name)).sort((t,r)=>a(t)>a(r))}function l(t){return f(t).filter((t,r,e)=>0===r||t!==e[r-1])}function p(t,r=Math.random){let e,n,o=t.length;for(;o;)e=r()*o--|0,n=t[o],t[o]=t[e],t[e]=n;return t}function d(t){return 0===t.length?[[]]:d(t.slice(1)).reduce(function(r,e){return r.concat(t.map(function(r,n){const o=e.slice();return o.splice(n,0,t[0]),o}))},[])}
},{"../note":"Oi/k"}],"6tV8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chroma=s,exports.chromas=l,exports.modes=c,exports.isChroma=f,exports.intervals=m,exports.isEqual=h,exports.isSubsetOf=x,exports.isSupersetOf=d,exports.includes=g,exports.filter=v,exports.default=void 0;var t=require("../note"),e=require("../interval"),r=require("../array"),n={chroma:s,chromas:l,isChroma:f,intervals:m,isSubsetOf:x,isSupersetOf:d,isEqual:h,modes:c,includes:g,filter:v};exports.default=n;const o=t=>parseInt(s(t),2),u=t=>t.replace(/0/g,"").length;function s(n){if(f(n))return n;let o,u;(0,r.assert)(n);const s=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<n.length;r++){if(u=n[r],null===(o=(0,t.chroma)(u))&&(o=(0,e.chroma)(n[r])),null===o)return null;s[o]=1}return s.join("")}let i=null;function l(t){return i=i||(0,r.range)(2048,4095).map(t=>t.toString(2)),"number"==typeof t?i.filter(e=>u(e)===t):i.slice()}function c(t,e){e=!1!==e;const n=(s(t)||"").split("");return(0,r.compact)(n.map(function(t,o){const u=(0,r.rotate)(o,n);return e&&"0"===u[0]?null:u.join("")}))}const a=/^[01]{12}$/;function f(t){return a.test(t)}const p="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function m(t){return f(t)?(0,r.compact)(t.split("").map(function(t,e){return"1"===t?p[e]:null})):[]}function h(t,e){return 1===arguments.length?e=>h(t,e):s(t)===s(e)}function x(t,e){return arguments.length>1?x(t)(e):(t=o(t),function(e){return(e=o(e))!==t&&(e&t)===e})}function d(t,e){return arguments.length>1?d(t)(e):(t=o(t),function(e){return(e=o(e))!==t&&(e|t)===e})}function g(e,r){return arguments.length>1?g(e)(r):(e=s(e),r=>"1"===e[(0,t.chroma)(r)])}function v(t,e){return 1===arguments.length?e=>v(t,e):e.filter(g(t))}
},{"../note":"Oi/k","../interval":"V9PQ","../array":"GVuH"}],"g5I+":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"+JJD":[function(require,module,exports) {
var process = require("process");
var t=require("process");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.asap=xt,exports.all=Q,exports.allSettled=tt,exports.race=et,exports.hash=it,exports.hashSettled=at,exports.rethrow=lt,exports.defer=ft,exports.denodeify=z,exports.configure=i,exports.on=Lt,exports.off=Wt,exports.resolve=vt,exports.reject=dt,exports.map=_t,exports.filter=jt,exports.async=exports.EventTarget=exports.Promise=exports.cast=exports.default=void 0;var n={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,e){if("function"!=typeof e)throw new TypeError("Callback must be a function");var n=r(this),o=n[t];o||(o=n[t]=[]),-1===o.indexOf(e)&&o.push(e)},off:function(t,e){var n=r(this);if(e){var o=n[t],i=o.indexOf(e);-1!==i&&o.splice(i,1)}else n[t]=[]},trigger:function(t,e,n){var o=r(this)[t];if(o)for(var i=0;i<o.length;i++)(0,o[i])(e,n)}};exports.EventTarget=n;var o={instrument:!1};function i(t,e){if(2!==arguments.length)return o[t];o[t]=e}n.mixin(o);var s=[];function u(){setTimeout(function(){for(var t=0;t<s.length;t++){var e=s[t],r=e.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),o.trigger(e.name,e.payload)}s.length=0},50)}function c(t,e,r){1===s.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:r&&r._id,label:e._label,timeStamp:Date.now(),error:o["instrument-with-stack"]?new Error(e._label):null}})&&u()}function a(t,r){if(t&&"object"===e(t)&&t.constructor===this)return t;var n=new this(h,r);return O(n,t),n}function l(){return new TypeError("A promises callback cannot return that same promise.")}function f(t){var r=e(t);return null!==t&&("object"===r||"function"===r)}function h(){}var p=void 0,y=1,_=2,v={error:null};function d(t){try{return t.then}catch(e){return v.error=e,v}}var m=void 0;function b(){try{var t=m;return m=null,t.apply(this,arguments)}catch(e){return v.error=e,v}}function w(t){return m=t,b}function g(t,e,r){o.async(function(t){var n=!1,o=w(r).call(e,function(r){n||(n=!0,e===r?A(t,r):O(t,r))},function(e){n||(n=!0,T(t,e))},"Settle: "+(t._label||" unknown promise"));if(!n&&o===v){n=!0;var i=v.error;v.error=null,T(t,i)}},t)}function j(t,e){e._state===y?A(t,e._result):e._state===_?(e._onError=null,T(t,e._result)):S(e,void 0,function(r){e===r?A(t,r):O(t,r)},function(e){return T(t,e)})}function E(t,e,r){if(e.constructor===t.constructor&&r===M&&t.constructor.resolve===a)j(t,e);else if(r===v){var n=v.error;v.error=null,T(t,n)}else"function"==typeof r?g(t,e,r):A(t,e)}function O(t,e){t===e?A(t,e):f(e)?E(t,e,d(e)):A(t,e)}function x(t){t._onError&&t._onError(t._result),P(t)}function A(t,e){t._state===p&&(t._result=e,t._state=y,0===t._subscribers.length?o.instrument&&c("fulfilled",t):o.async(P,t))}function T(t,e){t._state===p&&(t._state=_,t._result=e,o.async(x,t))}function S(t,e,r,n){var i=t._subscribers,s=i.length;t._onError=null,i[s]=e,i[s+y]=r,i[s+_]=n,0===s&&t._state&&o.async(P,t)}function P(t){var e=t._subscribers,r=t._state;if(o.instrument&&c(r===y?"fulfilled":"rejected",t),0!==e.length){for(var n=void 0,i=void 0,s=t._result,u=0;u<e.length;u+=3)n=e[u],i=e[u+r],n?R(r,n,i,s):i(s);t._subscribers.length=0}}function R(t,e,r,n){var o="function"==typeof r,i=void 0;if(i=o?w(r)(n):n,e._state!==p);else if(i===e)T(e,l());else if(i===v){var s=v.error;v.error=null,T(e,s)}else o?O(e,i):t===y?A(e,i):t===_&&T(e,i)}function k(t,e){var r=!1;try{e(function(e){r||(r=!0,O(t,e))},function(e){r||(r=!0,T(t,e))})}catch(n){T(t,n)}}function M(t,e,r){var n=this._state;if(n===y&&!t||n===_&&!e)return o.instrument&&c("chained",this,this),this;this._onError=null;var i=new this.constructor(h,r),s=this._result;if(o.instrument&&c("chained",this,i),n===p)S(this,i,t,e);else{var u=n===y?t:e;o.async(function(){return R(n,i,u,s)})}return i}var C=function(){function t(t,e,r,n){this._instanceConstructor=t,this.promise=new t(h,n),this._abortOnReject=r,this._isUsingOwnPromise=t===L,this._isUsingOwnResolve=t.resolve===a,this._init.apply(this,arguments)}return t.prototype._init=function(t,e){var r=e.length||0;this.length=r,this._remaining=r,this._result=new Array(r),this._enumerate(e)},t.prototype._enumerate=function(t){for(var e=this.length,r=this.promise,n=0;r._state===p&&n<e;n++)this._eachEntry(t[n],n,!0);this._checkFullfillment()},t.prototype._checkFullfillment=function(){if(0===this._remaining){var t=this._result;A(this.promise,t),this._result=null}},t.prototype._settleMaybeThenable=function(t,e,r){var n=this._instanceConstructor;if(this._isUsingOwnResolve){var o=d(t);if(o===M&&t._state!==p)t._onError=null,this._settledAt(t._state,e,t._result,r);else if("function"!=typeof o)this._settledAt(y,e,t,r);else if(this._isUsingOwnPromise){var i=new n(h);E(i,t,o),this._willSettleAt(i,e,r)}else this._willSettleAt(new n(function(e){return e(t)}),e,r)}else this._willSettleAt(n.resolve(t),e,r)},t.prototype._eachEntry=function(t,r,n){null!==t&&"object"===e(t)?this._settleMaybeThenable(t,r,n):this._setResultAt(y,r,t,n)},t.prototype._settledAt=function(t,e,r,n){var o=this.promise;o._state===p&&(this._abortOnReject&&t===_?T(o,r):(this._setResultAt(t,e,r,n),this._checkFullfillment()))},t.prototype._setResultAt=function(t,e,r,n){this._remaining--,this._result[e]=r},t.prototype._willSettleAt=function(t,e,r){var n=this;S(t,void 0,function(t){return n._settledAt(y,e,t,r)},function(t){return n._settledAt(_,e,t,r)})},t}();function F(t,e,r){this._remaining--,this._result[e]=t===y?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function I(t,e){return Array.isArray(t)?new C(this,t,!0,e).promise:this.reject(new TypeError("Promise.all must be called with an array"),e)}function N(t,e){var r=new this(h,e);if(!Array.isArray(t))return T(r,new TypeError("Promise.race must be called with an array")),r;for(var n=0;r._state===p&&n<t.length;n++)S(this.resolve(t[n]),void 0,function(t){return O(r,t)},function(t){return T(r,t)});return r}function U(t,e){var r=new this(h,e);return T(r,t),r}var q="rsvp_"+Date.now()+"-",D=0;function K(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var L=function(){function t(e,r){this._id=D++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],o.instrument&&c("created",this),h!==e&&("function"!=typeof e&&K(),this instanceof t?k(this,e):G())}return t.prototype._onError=function(t){var e=this;o.after(function(){e._onError&&o.trigger("error",t,e._label)})},t.prototype.catch=function(t,e){return this.then(void 0,t,e)},t.prototype.finally=function(t,e){var r=this.constructor;return"function"==typeof t?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();function W(t,e){for(var r={},n=t.length,o=new Array(n),i=0;i<n;i++)o[i]=t[i];for(var s=0;s<e.length;s++){r[e[s]]=o[s+1]}return r}function Y(t){for(var e=t.length,r=new Array(e-1),n=1;n<e;n++)r[n-1]=t[n];return r}function $(t,e){return{then:function(r,n){return t.call(e,r,n)}}}function z(t,e){var r=function(){for(var r=arguments.length,n=new Array(r+1),o=!1,i=0;i<r;++i){var s=arguments[i];if(!o){if((o=J(s))===v){var u=v.error;v.error=null;var c=new L(h);return T(c,u),c}o&&!0!==o&&(s=$(o,s))}n[i]=s}var a=new L(h);return n[r]=function(t,r){t?T(a,t):void 0===e?O(a,r):!0===e?O(a,Y(arguments)):Array.isArray(e)?O(a,W(arguments,e)):O(a,r)},o?H(a,n,t,this):B(a,n,t,this)};return r.__proto__=t,r}function B(t,e,r,n){if(w(r).apply(n,e)===v){var o=v.error;v.error=null,T(t,o)}return t}function H(t,e,r,n){return L.all(e).then(function(e){return B(t,e,r,n)})}function J(t){return null!==t&&"object"===e(t)&&(t.constructor===L||d(t))}function Q(t,e){return L.all(t,e)}function V(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function X(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}exports.Promise=L,L.cast=a,L.all=I,L.race=N,L.resolve=a,L.reject=U,L.prototype._guidKey=q,L.prototype.then=M;var Z=function(t){function e(e,r,n){return V(this,t.call(this,e,r,!1,n))}return X(e,t),e}(C);function tt(t,e){return Array.isArray(t)?new Z(L,t,e).promise:L.reject(new TypeError("Promise.allSettled must be called with an array"),e)}function et(t,e){return L.race(t,e)}function rt(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function nt(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}Z.prototype._setResultAt=F;var ot=function(t){function e(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];return rt(this,t.call(this,e,r,n,o))}return nt(e,t),e.prototype._init=function(t,e){this._result={},this._enumerate(e)},e.prototype._enumerate=function(t){var e=Object.keys(t),r=e.length,n=this.promise;this._remaining=r;for(var o=void 0,i=void 0,s=0;n._state===p&&s<r;s++)i=t[o=e[s]],this._eachEntry(i,o,!0);this._checkFullfillment()},e}(C);function it(t,r){return L.resolve(t,r).then(function(t){if(null===t||"object"!==e(t))throw new TypeError("Promise.hash must be called with an object");return new ot(L,t,r).promise})}function st(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function ut(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var ct=function(t){function e(e,r,n){return st(this,t.call(this,e,r,!1,n))}return ut(e,t),e}(ot);function at(t,r){return L.resolve(t,r).then(function(t){if(null===t||"object"!==e(t))throw new TypeError("hashSettled must be called with an object");return new ct(L,t,!1,r).promise})}function lt(t){throw setTimeout(function(){throw t}),t}function ft(t){var e={resolve:void 0,reject:void 0};return e.promise=new L(function(t,r){e.resolve=t,e.reject=r},t),e}function ht(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function pt(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}ct.prototype._setResultAt=F;var yt=function(t){function e(e,r,n,o){return ht(this,t.call(this,e,r,!0,o,n))}return pt(e,t),e.prototype._init=function(t,e,r,n,o){var i=e.length||0;this.length=i,this._remaining=i,this._result=new Array(i),this._mapFn=o,this._enumerate(e)},e.prototype._setResultAt=function(t,e,r,n){if(n){var o=w(this._mapFn)(r,e);o===v?this._settledAt(_,e,o.error,!1):this._eachEntry(o,e,!1)}else this._remaining--,this._result[e]=r},e}(C);function _t(t,e,r){return"function"!=typeof e?L.reject(new TypeError("map expects a function as a second argument"),r):L.resolve(t,r).then(function(t){if(!Array.isArray(t))throw new TypeError("map must be called with an array");return new yt(L,t,e,r).promise})}function vt(t,e){return L.resolve(t,e)}function dt(t,e){return L.reject(t,e)}function mt(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function bt(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var wt={},gt=function(t){function e(){return mt(this,t.apply(this,arguments))}return bt(e,t),e.prototype._checkFullfillment=function(){if(0===this._remaining&&null!==this._result){var t=this._result.filter(function(t){return t!==wt});A(this.promise,t),this._result=null}},e.prototype._setResultAt=function(t,e,r,n){if(n){this._result[e]=r;var o=w(this._mapFn)(r,e);o===v?this._settledAt(_,e,o.error,!1):this._eachEntry(o,e,!1)}else this._remaining--,r||(this._result[e]=wt)},e}(yt);function jt(t,e,r){return"function"!=typeof e?L.reject(new TypeError("filter expects function as a second argument"),r):L.resolve(t,r).then(function(t){if(!Array.isArray(t))throw new TypeError("filter must be called with an array");return new gt(L,t,e,r).promise})}var Et=0,Ot=void 0;function xt(t,e){Nt[Et]=t,Nt[Et+1]=e,2===(Et+=2)&&Dt()}var At="undefined"!=typeof window?window:void 0,Tt=At||{},St=Tt.MutationObserver||Tt.WebKitMutationObserver,Pt="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Rt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function kt(){var e=t.nextTick,r=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(r)&&"0"===r[1]&&"10"===r[2]&&(e=setImmediate),function(){return e(Ut)}}function Mt(){return void 0!==Ot?function(){Ot(Ut)}:It()}function Ct(){var t=0,e=new St(Ut),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){return r.data=t=++t%2}}function Ft(){var t=new MessageChannel;return t.port1.onmessage=Ut,function(){return t.port2.postMessage(0)}}function It(){return function(){return setTimeout(Ut,1)}}var Nt=new Array(1e3);function Ut(){for(var t=0;t<Et;t+=2){(0,Nt[t])(Nt[t+1]),Nt[t]=void 0,Nt[t+1]=void 0}Et=0}function qt(){try{var t=Function("return this")().require("vertx");return Ot=t.runOnLoop||t.runOnContext,Mt()}catch(e){return It()}}var Dt=void 0;Dt=Pt?kt():St?Ct():Rt?Ft():void 0===At&&"function"==typeof require?qt():It(),o.async=xt,o.after=function(t){return setTimeout(t,0)};var Kt=vt;exports.cast=Kt;var Gt=function(t,e){return o.async(t,e)};function Lt(){o.on.apply(o,arguments)}function Wt(){o.off.apply(o,arguments)}if(exports.async=Gt,"undefined"!=typeof window&&"object"===e(window.__PROMISE_INSTRUMENTATION__)){var Yt=window.__PROMISE_INSTRUMENTATION__;for(var $t in i("instrument",!0),Yt)Yt.hasOwnProperty($t)&&Lt($t,Yt[$t])}var zt={asap:xt,cast:Kt,Promise:L,EventTarget:n,all:Q,allSettled:tt,race:et,hash:it,hashSettled:at,rethrow:lt,defer:ft,denodeify:z,configure:i,on:Lt,off:Wt,resolve:vt,reject:dt,map:_t,async:Gt,filter:jt},Bt=zt;exports.default=Bt;
},{"process":"g5I+"}],"YQ/w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=o,exports.find=c,exports.default=void 0;var e=a(require("./chord-data")),r=require("../pcset"),t=require("rsvp");function a(e){return e&&e.__esModule?e:{default:e}}var n={all:o,find:c};let i;exports.default=n;const s=e=>{const t=e[0].split(" "),a=e[1],n=e[2].split(" "),i={name:a,intervals:t,abbreviatures:n},s=e=>-1!==t.indexOf(e);return i.quality=s("5A")?"Augmented":s("3M")?"Major":s("5d")?"Diminished":s("3m")?"Minor":null,i.chroma=(0,r.chroma)(t),i.setnum=parseInt(i.chroma,2),Object.freeze(i)},u=(e,r)=>(e.name||"").localeCompare(r.name);function o(){return i||(i=e.default.map(s).sort(u))}const m=Object.freeze({intervals:[],names:[]}),l=e=>"string"==typeof e;function c(e){if(!e&&""!==e)return m;l(e)?e={name:e,abbreviature:e,chroma:e}:Array.isArray(e)?e={intervals:e}:"number"==typeof e&&(e={setnum:e}),e.intervals&&(e.chroma=(0,r.chroma)(e.intervals));return o().find(r=>l(e.name)&&e.name===r.name||l(e.abbreviature)&&-1!==r.abbreviatures.indexOf(e.abbreviature)||e.chroma&&e.chroma===r.chroma||e.setnum&&e.setnum===r.setnum)||m}
},{"./chord-data":"bTgq","../pcset":"6tV8","rsvp":"+JJD"}],"H8fA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chord=s,exports.scale=c;var r=require("../chord-dictionary"),e=require("../note"),o=require("../array"),t=require("../pcset");function s(s){const c=void 0!==(s=(0,o.compact)(s.map(e.name))).find(r=>(0,e.props)(r).alt>0),i=s[0],n=(0,e.chroma)(i),a=[];return(0,t.modes)(s,!1).forEach((o,t)=>{const s=(0,r.find)(o);s.intervals.length&&function(r,o,t){const s=t-n?.5:1,u=1===s?"":"/"+i,p=(0,e.fromMidi)(t,{pitchClass:!0,sharps:c}),d=r.abbreviatures[0];a.push({tonic:p,name:d,mod:u,score:s})}(s,0,t)}),a.sort((r,e)=>e.score-r.score)}function c(r){}
},{"../chord-dictionary":"YQ/w","../note":"Oi/k","../array":"GVuH","../pcset":"6tV8"}],"K0yk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toRGBA=exports.range=void 0;var r=function(r,t){return Array(t-r+1).fill().map(function(t,e){return e+r})};exports.range=r;var t=function(r,t){if("string"!=typeof r||!r.match(/^#[0-9a-f]{6}$/i))return"transparent";var e=r.toLowerCase(),n=parseInt(e.substr(1,2),16),a=parseInt(e.substr(3,2),16),o=parseInt(e.substr(5,2),16);return"rgba(".concat(n,",").concat(a,",").concat(o,",").concat(t,")")};exports.toRGBA=t;
},{}],"jBxF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateKeyboard=W,exports.setPitchWheel=O,exports.setModWheel=T,exports.initializeKeyboard=A;var t=o(require("tonal/note")),e=require("./utils");function o(t){return t&&t.__esModule?t:{default:t}}var n=document.getElementById("keyboard"),r=5,c=40,a=150,i=22,s=90,l=5,f=30,d=2,h=10,p=5,u=10,w=c,m=a,x=2*a-80,g="#bf3a2b",y="#44ffaa",b="#44bbff",v=function(t,e){return'<g id="note-'.concat(t.midi,'" class="note white" transform="translate(').concat(e,',0)">\n  <rect class="piano-key" width="').concat(c,'" height="').concat(a+r,'" x="0" y="').concat(-r,'" rx="').concat(r,'" ry="').concat(r,'"></rect>\n  <circle class="piano-tonic" cx="').concat(c/2,'" cy="').concat(a-f,'" r="').concat(l,'"></circle>\n  <text class="piano-key-name" x="').concat(c/2,'" y="').concat(a-d,'" text-anchor="middle">').concat(t.name,"</text>\n</g>")},k=function(t,e){return'<g id="note-'.concat(t.midi,'" class="note black" transform="translate(').concat(e-i/2,',0)">\n  <rect class="piano-key" width="').concat(i,'" height="').concat(s+r,'" x="0" y="').concat(-r,'" rx="').concat(r,'" ry="').concat(r,'"></rect>\n  <circle class="piano-tonic" cx="').concat(i/2,'" cy="').concat(s-f,'" r="').concat(l,'"></circle>\n</g>')},C=function(t,e){return'<g id="'.concat(t,'" transform="translate(').concat(e,',0)">\n  <rect class="wheelSocket" width="').concat(w,'" height="').concat(m,'" rx="').concat(h,'" ry="').concat(h,'" />\n  <g transform="translate(').concat(p,',0)" clip-path="url(#wheelClip)">\n    <rect class="wheel" transform="translate(0, ').concat(-m/2,')" width="').concat(w-2*p,'" height="').concat(2*m,'"></rect>\n  </g>\n</g>\n')},S=function(t,e){return'<svg width="100%" viewBox="'.concat(-e.width," 0 ").concat(t.width+e.width," ").concat(t.height,'" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <filter id="insetKey">                                                            \x3c!-- source: https://www.xanthir.com/b4Yv0 --\x3e\n      <feOffset dx="0" dy="-7"/>                                                          \x3c!-- Shadow Offset --\x3e\n      <feGaussianBlur stdDeviation="5" result="offset-blur"/>                            \x3c!-- Shadow Blur --\x3e\n      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/> \x3c!-- Invert the drop shadow to create an inner shadow --\x3e\n      <feFlood flood-color="black" flood-opacity="0.4" result="color"/>                   \x3c!-- Color & Opacity --\x3e\n      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>               \x3c!-- Clip color inside shadow --\x3e\n      <feComponentTransfer in="shadow" result="shadow">                                   \x3c!-- Shadow Opacity --\x3e\n        <feFuncA type="linear" slope="5"/>\n      </feComponentTransfer>\n      <feBlend mode="soft-light" in="shadow" in2="SourceGraphic"/>                        \x3c!-- Put shadow over original object --\x3e\n    </filter>\n    <filter id="insetWheel">                                                            \x3c!-- source: https://www.xanthir.com/b4Yv0 --\x3e\n      <feOffset dx="0" dy="0"/>                                                          \x3c!-- Shadow Offset --\x3e\n      <feGaussianBlur stdDeviation="2" result="offset-blur"/>                            \x3c!-- Shadow Blur --\x3e\n      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/> \x3c!-- Invert the drop shadow to create an inner shadow --\x3e\n      <feFlood flood-color="black" flood-opacity="1" result="color"/>                   \x3c!-- Color & Opacity --\x3e\n      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>               \x3c!-- Clip color inside shadow --\x3e\n      <feComponentTransfer in="shadow" result="shadow">                                   \x3c!-- Shadow Opacity --\x3e\n        <feFuncA type="linear" slope="1.5"/>\n      </feComponentTransfer>\n      <feBlend mode="normal" in="shadow" in2="SourceGraphic" />\n    </filter>\n    <linearGradient id="whiteKey" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#bbbbbb" />\n      <stop offset="8%"  stop-color="#eeeeee" />\n      <stop offset="90%" stop-color="#ffffff" />\n      <stop offset="91%" stop-color="#eeeeee" />\n    </linearGradient>\n    <linearGradient id="blackKey" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#000000" />\n      <stop offset="16%" stop-color="#222222" />\n      <stop offset="80%" stop-color="#444444" />\n      <stop offset="80.5%" stop-color="#aaaaaa" />\n      <stop offset="85%" stop-color="#222222" />\n      <stop offset="91%" stop-color="#000000" />\n    </linearGradient>\n    <linearGradient id="wheelGradient" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#000000" />\n      <stop offset="45%" stop-color="#555555" />\n      <stop offset="46%" stop-color="#111111" />\n      <stop offset="49.5%" stop-color="#333333" />\n      <stop offset="50%" stop-color="#bbbbbb" />\n      <stop offset="50.5%" stop-color="#444444" />\n      <stop offset="51%" stop-color="#555555" />\n      <stop offset="54%" stop-color="#666666" />\n      <stop offset="55%" stop-color="#333333" />\n      <stop offset="91%" stop-color="#000000" />\n    </linearGradient>\n    \n    <clipPath id="wheelClip">\n      <rect width="').concat(w-2*p,'" height="').concat(m-2,'" y="1" rx="').concat(h/2,'" ry="').concat(h/2,'" />\n    </clipPath>\n  </defs>\n\n  <g id="wheels" transform="translate(').concat(-e.width,',0)">\n    ').concat(e.markup,'\n  </g>\n\n  <g id="board" transform="translate(0,0)">\n    <rect id="keyboard-bg" width="').concat(t.width,'" height="').concat(t.height,'" x="0" y="0" />\n    ').concat(t.markup,'\n    <rect id="board-border" width="').concat(t.width,'" height="').concat(t.height,'" x="0" y="0" />\n  </g>\n</svg>\n')};function G(t){return t.reduce(function(t,e){var o=C(e,t.width);return{width:t.width+w+u,height:t.height,markup:t.markup+o}},{width:0,height:m,markup:""})}function B(e,o){var n=t.default.fromMidi(e,{sharps:!0}),r=t.default.props(n);return r.alt?{width:0,isWhite:!1,markup:k(r,o)}:{width:c,isWhite:!0,markup:v(r,o)}}function W(o,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["pitchWheel","modWheel"],c=t.default.props(t.default.simplify(o)),i=t.default.props(t.default.simplify(n)),s=c.name?c.alt?c.midi-1:c.midi:t.default.midi("C2"),l=i.name?i.alt?i.midi+1:i.midi:t.default.midi("B4"),f=(0,e.range)(s,l).reduce(function(t,e){var o=B(e,t.width),n=o.width,r=o.isWhite,c=o.markup;return{width:t.width+n,height:t.height,markup:r?c+t.markup:t.markup+c}},{width:0,height:a,markup:""}),d=G(r);return S(f,d)}function O(t){var o=document.querySelector("#pitchWheel .wheelSocket"),n=document.querySelector("#pitchWheel .wheel"),r=-m/2-t*(x/4);n.setAttribute("transform","translate(0, ".concat(r,")")),o.style.fill=t>0?(0,e.toRGBA)(y,t):(0,e.toRGBA)(g,-t)}function T(t){var o=document.querySelector("#modWheel .wheelSocket"),n=document.querySelector("#modWheel .wheel"),r=-(m-x/2)/2-t*(x/2);n.setAttribute("transform","translate(0, ".concat(r,")")),o.style.fill=(0,e.toRGBA)(b,t)}function A(){n.innerHTML=W("C0","C6")}
},{"tonal/note":"Oi/k","./utils":"K0yk"}],"Bj9A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.highlightNote=c,exports.fadeNote=l,exports.highlightTonic=a,exports.fadeTonics=u,exports.setChordHtml=s,exports.setNotesHtml=d,Object.defineProperty(exports,"setPitchWheel",{enumerable:!0,get:function(){return n.setPitchWheel}}),Object.defineProperty(exports,"setModWheel",{enumerable:!0,get:function(){return n.setModWheel}});var e=r(require("tonal/note")),t=require("./utils"),n=require("./keyboard");function r(e){return e&&e.__esModule?e:{default:e}}var o=document.getElementById("chord"),i=document.getElementById("notes");function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active",n=document.getElementById("note-".concat(e));n&&n.classList.add(t)}function l(e){var t=document.getElementById("note-".concat(e));t&&t.classList.remove("active")}function a(n){var r=(0,t.range)(0,10).map(function(t){return e.default.midi("".concat(n).concat(t))}),o=!0,i=!1,l=void 0;try{for(var a,u=r[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){c(a.value,"tonic")}}catch(s){i=!0,l=s}finally{try{o||null==u.return||u.return()}finally{if(i)throw l}}}function u(){var e=document.querySelectorAll(".tonic");if(e&&e.length){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.classList.remove("tonic")}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}}function s(e){o.innerHTML=e}function d(e){i.innerHTML=e}
},{"tonal/note":"Oi/k","./utils":"K0yk","./keyboard":"jBxF"}],"X9aa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chordToHtml=o,exports.keyToHtml=s;var n=t(require("tonal/note"));function t(n){return n&&n.__esModule?n:{default:n}}var a=!1,e='<span class="flat">♭</span>',c='<span class="sharp">♯</span>',r={C:"Do",D:"Ré",E:"Mi",F:"Fa",G:"Sol",A:"La",B:"Si"};function o(n){return'\n      <span class="key">'.concat(s(n.tonic),'</span>\n      <span class="chordname">').concat(l(n.name),'</span><span class="bassnote">').concat(p(n.mod),"</span>\n    ")}function s(t){var a=n.default.tokenize(t);return"".concat(i(a[0])).concat(u(a[1])).concat(a[2]).concat(a[3])}function u(n){return n?"#"===n?c:"b"===n?e:n:""}function l(n){return f(n).replace(/b(\d)/g,"".concat(e,"$1")).replace(/#/g,c)}function p(n){if(!n)return"";var t=n.replace(/^\//,"");return"/".concat(s(t).replace(/b(\d)/g,"".concat(e,"$1")).replace(/#/g,c))}function i(n){return a?r[n]:n}function f(n){return"M"===n.substr(0,1)?n.substr(1):n}
},{"tonal/note":"Oi/k"}],"Rgfk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noteOn=u,exports.noteOff=d,exports.pitchWheel=p,exports.modWheel=a,exports.polyPressure=exports.controller=void 0;var e=l(require("tonal/note")),o=require("tonal/detect"),t=require("./ui"),r=require("./chords");function l(e){return e&&e.__esModule?e:{default:e}}var n=[],i=0,s=0,c=null;function u(e){n.includes(e)||(n.push(e),(0,t.highlightNote)(e)),n.sort(),f()}function d(e){var o=n.indexOf(e);o>-1&&(n.splice(o,1),(0,t.fadeNote)(e)),f()}function p(e){i=e,(0,t.setPitchWheel)(e)}function a(e){s=e,(0,t.setModWheel)(s)}function h(){var e;(e=console).log.apply(e,arguments)}function f(){var l=n.map(e.default.fromMidi).map(e.default.pc),i=l.length>2?(0,o.chord)(l):[];if((0,t.setNotesHtml)(l.map(r.keyToHtml).join(" ")),i&&i.length){var s=i[0];(0,t.setChordHtml)((0,r.chordToHtml)(s)),c&&(0,t.fadeTonics)(),(0,t.highlightTonic)(s.tonic),c=s}else(0,t.setChordHtml)(""),(0,t.fadeTonics)()}var v=h.bind(void 0,"controller");exports.controller=v;var m=h.bind(void 0,"polyPressure");exports.polyPressure=m;
},{"tonal/note":"Oi/k","tonal/detect":"H8fA","./ui":"Bj9A","./chords":"X9aa"}],"yqcC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializeMidi=p;var e=require("./events"),n=require("./ui"),t=["mpk","key"];function o(n){var t=n.data[0]>>4,o=15&n.data[0],a=n.data[1],i=n.data[2];9!==o&&(8===t||9===t&&0===i?(0,e.noteOff)(a):9===t?(0,e.noteOn)(a,i/127):11===t?1===a?(0,e.modWheel)(i/127):(0,e.controller)(a,i/127):14===t?(0,e.pitchWheel)((128*i+a-8192)/8192):10===t?(0,e.polyPressure)(a,i/127):console.log(n.data[0]+" "+n.data[1]+" "+n.data[2]))}var a=null,i=null,r=null;function c(e){r&&(r.onmidimessage=null);var n=e.target[e.target.selectedIndex].value;(r="function"==typeof i.inputs?i.inputs()[e.target.selectedIndex]:i.inputs.get(n))&&(r.onmidimessage=o)}function s(){a.options.length=0,r&&"disconnected"==r.state&&(r=null);for(var e=null,n=i.inputs.values(),c=n.next();c&&!c.done;c=n.next()){c=c.value,e||(e=c);var s=c.name.toString(),l=!1;r&&r===c&&(l=!0);for(var d=0,u=t;d<u.length;d++){var m=u[d];r||-1===s.toLowerCase().indexOf(m)||(l=!0)}a.appendChild(new Option(c.name,c.id,l,l)),l&&((r=c).onmidimessage=o)}r||(r=e)&&(r.onmidimessage=o)}function l(e){console.log("connection: ".concat(e.port.name," ").concat(e.port.connection," ").concat(e.port.state)),s()}function d(e){i=e,document.getElementById("app").className="loaded",a=document.getElementById("midiIn"),e.onstatechange=l,s(),a.onchange=c}function u(e){document.getElementById("app").className="error",m(),console.log("MIDI not initialized - error encountered: ".concat(e.code))}function m(){(0,n.setChordHtml)("Error"),(0,n.setNotesHtml)("Cannot initialize MIDI")}function p(){navigator.requestMIDIAccess?navigator.requestMIDIAccess().then(d,u):m()}
},{"./events":"Rgfk","./ui":"Bj9A"}],"H99C":[function(require,module,exports) {
"use strict";require("./styles.css");var i=require("./midi"),e=require("./keyboard"),r=!1;r||((0,i.initializeMidi)(),r=!0),(0,e.initializeKeyboard)();
},{"./styles.css":"D9Nj","./midi":"yqcC","./keyboard":"jBxF"}]},{},["H99C"], null)
//# sourceMappingURL=src.2661dc67.js.map