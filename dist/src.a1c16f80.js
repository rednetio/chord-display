parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"D9Nj":[function(require,module,exports) {

},{}],"Oi/k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.names=r,exports.tokenize=s,exports.props=a,exports.name=f,exports.pc=m,exports.midi=d,exports.freq=b,exports.freqToMidi=y,exports.chroma=A,exports.oct=q,exports.stepToLetter=C,exports.altToAcc=G,exports.fromProps=v,exports.fromMidi=z,exports.simplify=D,exports.enharmonic=O,exports.midiToFreq=exports.default=void 0;var t={tokenize:s,props:a,name:f,names:r,pc:m,oct:q,chroma:A,midi:d,freq:b,fromMidi:z,freqToMidi:y,altToAcc:G,stepToLetter:C,fromProps:v,simplify:D,enharmonic:O};exports.default=t;const e="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" ");function r(t={}){return e.filter(e=>!1!==t.unaltered&&void 0===e[1]||!0===t.flats&&"b"===e[1]||!0===t.sharps&&"#"===e[1])}const n=r({sharps:!0}),o=r({flats:!0}),c=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function s(t){"string"!=typeof t&&(t="");const e=c.exec(t);return e?[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]:null}const l=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),u=[0,2,4,5,7,9,11],i=t=>{const e=s(t);if(""===e[0]||""!==e[3])return l;const[r,n,o]=e,c={letter:r,acc:n,octStr:o};return c.pc=c.letter+c.acc,c.name=c.pc+o,c.step=(c.letter.charCodeAt(0)+3)%7,c.alt="b"===c.acc[0]?-c.acc.length:c.acc.length,c.oct=o.length?+o:null,c.chroma=(u[c.step]+c.alt+120)%12,c.midi=null!==c.oct?u[c.step]+c.alt+12*(c.oct+1):null,c.freq=x(c.midi),Object.freeze(c)};let p={};function a(t){return p[t]||(p[t]=i(t))}function f(t){return a(t).name}function m(t){return a(t).pc}const h=t=>t>=0&&t<=127;function d(t){if("number"!=typeof t&&"string"!=typeof t)return null;const e=a(t).midi,r=e||0===e?e:+t;return h(r)?r:null}const x=(t,e=440)=>"number"==typeof t?Math.pow(2,(t-69)/12)*e:null;function b(t){return a(t).freq||x(t)}exports.midiToFreq=x;const M=Math.log(2),g=Math.log(440);function y(t){const e=12*(Math.log(t)-g)/M+69;return Math.round(100*e)/100}function A(t){return a(t).chroma}function q(t){return a(t).oct}const T="CDEFGAB";function C(t){return T[t]}const j=(t,e)=>Array(e+1).join(t),F=(t,e)=>"number"!=typeof t?"":e(t);function G(t){return F(t,t=>t<0?j("b",-t):j("#",t))}function v(t={},e=null){const{step:r,alt:n,oct:o}=e?Object.assign({},a(e),t):t,c=C(r);if(!c)return null;const s=c+G(n);return o||0===o?s+o:s}function z(t,e={}){t=Math.round(t);const r=(!0===e.sharps?n:o)[t%12];return e.pitchClass?r:r+(Math.floor(t/12)-1)}function D(t,e={}){const{alt:r,chroma:n,midi:o}=a(t);return null===n?null:z(o||n,{sharps:!1===e.sameAccType?r<0:r>0,pitchClass:null===o})}function O(t){return D(t,!1)}
},{}],"bTgq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var m=[["1P 3M 5P","major","M "],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69"],["1P 3M 5P 7M 11A","lydian","maj#4 Δ#4 Δ#11"],["1P 3M 6m 7M","major seventh b6","M7b6"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 m/M7 -Δ7 mΔ"],["1P 3m 5P 6M","minor sixth","m6"],["1P 3m 5P 7m 9M","minor ninth","m9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant b9","7b9"],["1P 3M 5P 7m 9A","dominant #9","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended 4th","sus4"],["1P 2M 5P","suspended 2nd","sus2"],["1P 4P 5P 7m","suspended 4th seventh","7sus4"],["1P 5P 7m 9M 11P","eleventh","11 sus Bb/C for C11"],["1P 4P 5P 7m 9m","suspended 4th b9","b9sus phryg"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5"],["1P 3M 5P 7M 9M 11A","major #11 (lydian)","maj9#11 Δ9#11"],["1P 3M 5P 7m 9A","dominant #9","7#9"],["1P 2M 4P 5P",null,"sus24 sus4add9"],["1P 3M 13m",null,"Mb6"],["1P 3M 5A 7M 9M",null,"maj9#5 Maj9#5"],["1P 3M 5A 7m",null,"7#5 +7 7aug aug7"],["1P 3M 5A 7m 9A",null,"7#5#9 7alt 7#5#9_ 7#9b13_"],["1P 3M 5A 7m 9M",null,"9#5 9+"],["1P 3M 5A 7m 9M 11A",null,"9#5#11"],["1P 3M 5A 7m 9m",null,"7#5b9"],["1P 3M 5A 7m 9m 11A",null,"7#5b9#11"],["1P 3M 5A 9A",null,"+add#9"],["1P 3M 5A 9M",null,"M#5add9 +add9"],["1P 3M 5P 6M 11A",null,"M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M",null,"M7add13"],["1P 3M 5P 6M 9M 11A",null,"69#11"],["1P 3M 5P 6m 7m",null,"7b6"],["1P 3M 5P 7M 9A 11A",null,"maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M",null,"M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m",null,"M7b9"],["1P 3M 5P 7m 11A 13m",null,"7#11b13 7b5b13"],["1P 3M 5P 7m 13M",null,"7add6 67 7add13"],["1P 3M 5P 7m 9A 11A",null,"7#9#11 7b5#9"],["1P 3M 5P 7m 9A 11A 13M",null,"13#9#11"],["1P 3M 5P 7m 9A 11A 13m",null,"7#9#11b13"],["1P 3M 5P 7m 9A 13M",null,"13#9 13#9_"],["1P 3M 5P 7m 9A 13m",null,"7#9b13"],["1P 3M 5P 7m 9M 11A",null,"9#11 9+4 9#4 9#11_ 9#4_"],["1P 3M 5P 7m 9M 11A 13M",null,"13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m",null,"9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A",null,"7b9#11 7b5b9"],["1P 3M 5P 7m 9m 11A 13M",null,"13b9#11"],["1P 3M 5P 7m 9m 11A 13m",null,"7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M",null,"13b9"],["1P 3M 5P 7m 9m 13m",null,"7b9b13"],["1P 3M 5P 7m 9m 9A",null,"7b9#9"],["1P 3M 5P 9M",null,"Madd9 2 add9 add2"],["1P 3M 5P 9m",null,"Maddb9"],["1P 3M 5d",null,"Mb5"],["1P 3M 5d 6M 7m 9M",null,"13b5"],["1P 3M 5d 7M",null,"M7b5"],["1P 3M 5d 7M 9M",null,"M9b5"],["1P 3M 5d 7m",null,"7b5"],["1P 3M 5d 7m 9M",null,"9b5"],["1P 3M 7m",null,"7no5"],["1P 3M 7m 13m",null,"7b13"],["1P 3M 7m 9M",null,"9no5"],["1P 3M 7m 9M 13M",null,"13no5"],["1P 3M 7m 9M 13m",null,"9b13"],["1P 3m 4P 5P",null,"madd4"],["1P 3m 5A",null,"m#5 m+ mb6"],["1P 3m 5P 6M 9M",null,"m69 _69"],["1P 3m 5P 6m 7M",null,"mMaj7b6"],["1P 3m 5P 6m 7M 9M",null,"mMaj9b6"],["1P 3m 5P 7M 9M",null,"mMaj9 -Maj9"],["1P 3m 5P 7m 11P",null,"m7add11 m7add4"],["1P 3m 5P 9M",null,"madd9"],["1P 3m 5d 6M 7M",null,"o7M7"],["1P 3m 5d 7M",null,"oM7"],["1P 3m 5d 7m",null,"m7b5 half-diminished h7 _7b5"],["1P 3m 6m 7M",null,"mb6M7"],["1P 3m 6m 7m",null,"m7#5"],["1P 3m 6m 7m 9M",null,"m9#5"],["1P 3m 6m 7m 9M 11P",null,"m11A"],["1P 3m 6m 9m",null,"mb6b9"],["1P 3m 7m 12d 2M",null,"m9b5 h9 -9b5"],["1P 3m 7m 12d 2M 4P",null,"m11b5 h11 _11b5"],["1P 4P 5A 7M",null,"M7#5sus4"],["1P 4P 5A 7M 9M",null,"M9#5sus4"],["1P 4P 5A 7m",null,"7#5sus4"],["1P 4P 5P 7M",null,"M7sus4"],["1P 4P 5P 7M 9M",null,"M9sus4"],["1P 4P 5P 7m 9M",null,"9sus4 9sus"],["1P 4P 5P 7m 9M 13M",null,"13sus4 13sus"],["1P 4P 5P 7m 9m 13m",null,"7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m",null,"4 quartal"],["1P 5P 7m 9m 11P",null,"11b9"]];exports.default=m;
},{}],"V9PQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.names=i,exports.tokenize=m,exports.props=x,exports.num=h,exports.name=y,exports.semitones=v,exports.chroma=b,exports.ic=g,exports.fromProps=A,exports.simplify=q,exports.invert=j,exports.fromSemitones=$,exports.default=void 0;var t={tokenize:m,props:x,simplify:q,invert:j,names:i,num:h,name:y,fromProps:A,chroma:b,ic:g,semitones:v,fromSemitones:$};exports.default=t;const e="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",n="(AA|A|P|M|m|d|dd)([-+]?\\d+)",r=new RegExp("^"+e+"|"+n+"$"),o=[0,2,4,5,7,9,11],s="PMMPPMM",u=[0,1,2,3,4,5,6,5,4,3,2,1],l="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" ");function i(t){return"string"!=typeof t?l.slice():l.filter(e=>-1!==t.indexOf(e[1]))}function m(t){const e=r.exec(t);return null===e?null:e[1]?[e[1],e[2]]:[e[4],e[3]]}const p=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null}),c=(t,e)=>Array(Math.abs(e)+1).join(t),a=(t,e)=>"M"===e&&"M"===t?0:"P"===e&&"P"===t?0:"m"===e&&"M"===t?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?"P"===t?-e.length:-e.length-1:null,f=(t,e)=>0===e?"M"===t?"M":"P":-1===e&&"M"===t?"m":e>0?c("A",e):e<0?c("d","P"===t?e:e+1):null,M=t=>(Math.abs(t)-1)%7,d=t=>{const e=m(t);if(null===e)return p;const n={num:+e[0],q:e[1]};return n.step=M(n.num),n.type=s[n.step],"M"===n.type&&"P"===n.q?p:(n.name=""+n.num+n.q,n.dir=n.num<0?-1:1,n.simple=8===n.num||-8===n.num?n.num:n.dir*(n.step+1),n.alt=a(n.type,n.q),n.oct=Math.floor((Math.abs(n.num)-1)/7),n.semitones=n.dir*(o[n.step]+n.alt+12*n.oct),n.chroma=(n.dir*(o[n.step]+n.alt)%12+12)%12,Object.freeze(n))},P={};function x(t){return"string"!=typeof t?p:P[t]||(P[t]=d(t))}function h(t){return x(t).num}function y(t){return x(t).name}function v(t){return x(t).semitones}function b(t){return x(t).chroma}function g(t){return"string"==typeof t&&(t=x(t).chroma),"number"==typeof t?u[t%12]:null}function A({num:t,step:e,alt:n,oct:r=1,dir:o}={}){if(void 0!==e&&(t=e+1+7*r),void 0===t)return null;const u=o<0?"-":"",l=s[M(t)];return u+t+f(l,n)}function q(t){const e=x(t);return e===p?null:e.simple+e.q}function j(t){const e=x(t);return e===p?null:A({step:(7-e.step)%7,alt:"P"===e.type?-e.alt:-(e.alt+1),oct:e.oct,dir:e.dir})}var z=[1,2,2,3,3,4,5,5,6,6,7,7],O="P m M m M P d P m M m M".split(" ");function $(t){var e=t<0?-1:1,n=Math.abs(t),r=n%12,o=Math.floor(n/12);return e*(z[r]+7*o)+O[r]}
},{}],"GVuH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=s,exports.range=u,exports.rotate=c,exports.compact=i,exports.sort=f,exports.sortedUniq=l,exports.shuffle=p,exports.permutations=d,exports.default=void 0;var t=require("../note");const r=Array.isArray;var e={range:u,rotate:c,compact:i,sort:f,sortedUniq:l,shuffle:p,permutations:d};function n(t,r){const e=[];for(;r--;e[r]=r+t);return e}function o(t,r){const e=[];for(;r--;e[r]=t-r);return e}function s(t,e="Must be an array."){if(!r(t))throw Error(e+" Was: "+t)}function u(t,r){return null===t||null===r?[]:t<r?n(t,r-t+1):o(t,t-r+1)}function c(t,r){const e=r.length,n=(t%e+e)%e;return r.slice(n,e).concat(r.slice(0,n))}function i(t){return t.filter(t=>0===t||t)}exports.default=e;const a=r=>{const e=(0,t.props)(r).midi;return null!==e?e:(0,t.props)(r+"-100").midi};function f(r){return i(r.map(t.name)).sort((t,r)=>a(t)>a(r))}function l(t){return f(t).filter((t,r,e)=>0===r||t!==e[r-1])}function p(t,r=Math.random){let e,n,o=t.length;for(;o;)e=r()*o--|0,n=t[o],t[o]=t[e],t[e]=n;return t}function d(t){return 0===t.length?[[]]:d(t.slice(1)).reduce(function(r,e){return r.concat(t.map(function(r,n){const o=e.slice();return o.splice(n,0,t[0]),o}))},[])}
},{"../note":"Oi/k"}],"6tV8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chroma=s,exports.chromas=l,exports.modes=c,exports.isChroma=f,exports.intervals=m,exports.isEqual=h,exports.isSubsetOf=x,exports.isSupersetOf=d,exports.includes=g,exports.filter=v,exports.default=void 0;var t=require("../note"),e=require("../interval"),r=require("../array"),n={chroma:s,chromas:l,isChroma:f,intervals:m,isSubsetOf:x,isSupersetOf:d,isEqual:h,modes:c,includes:g,filter:v};exports.default=n;const o=t=>parseInt(s(t),2),u=t=>t.replace(/0/g,"").length;function s(n){if(f(n))return n;let o,u;(0,r.assert)(n);const s=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<n.length;r++){if(u=n[r],null===(o=(0,t.chroma)(u))&&(o=(0,e.chroma)(n[r])),null===o)return null;s[o]=1}return s.join("")}let i=null;function l(t){return i=i||(0,r.range)(2048,4095).map(t=>t.toString(2)),"number"==typeof t?i.filter(e=>u(e)===t):i.slice()}function c(t,e){e=!1!==e;const n=(s(t)||"").split("");return(0,r.compact)(n.map(function(t,o){const u=(0,r.rotate)(o,n);return e&&"0"===u[0]?null:u.join("")}))}const a=/^[01]{12}$/;function f(t){return a.test(t)}const p="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function m(t){return f(t)?(0,r.compact)(t.split("").map(function(t,e){return"1"===t?p[e]:null})):[]}function h(t,e){return 1===arguments.length?e=>h(t,e):s(t)===s(e)}function x(t,e){return arguments.length>1?x(t)(e):(t=o(t),function(e){return(e=o(e))!==t&&(e&t)===e})}function d(t,e){return arguments.length>1?d(t)(e):(t=o(t),function(e){return(e=o(e))!==t&&(e|t)===e})}function g(e,r){return arguments.length>1?g(e)(r):(e=s(e),r=>"1"===e[(0,t.chroma)(r)])}function v(t,e){return 1===arguments.length?e=>v(t,e):e.filter(g(t))}
},{"../note":"Oi/k","../interval":"V9PQ","../array":"GVuH"}],"g5I+":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"+JJD":[function(require,module,exports) {
var process = require("process");
var t=require("process");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.asap=xt,exports.all=Q,exports.allSettled=tt,exports.race=et,exports.hash=it,exports.hashSettled=at,exports.rethrow=lt,exports.defer=ft,exports.denodeify=z,exports.configure=i,exports.on=Lt,exports.off=Wt,exports.resolve=vt,exports.reject=dt,exports.map=_t,exports.filter=jt,exports.async=exports.EventTarget=exports.Promise=exports.cast=exports.default=void 0;var n={mixin:function(t){return t.on=this.on,t.off=this.off,t.trigger=this.trigger,t._promiseCallbacks=void 0,t},on:function(t,e){if("function"!=typeof e)throw new TypeError("Callback must be a function");var n=r(this),o=n[t];o||(o=n[t]=[]),-1===o.indexOf(e)&&o.push(e)},off:function(t,e){var n=r(this);if(e){var o=n[t],i=o.indexOf(e);-1!==i&&o.splice(i,1)}else n[t]=[]},trigger:function(t,e,n){var o=r(this)[t];if(o)for(var i=0;i<o.length;i++)(0,o[i])(e,n)}};exports.EventTarget=n;var o={instrument:!1};function i(t,e){if(2!==arguments.length)return o[t];o[t]=e}n.mixin(o);var s=[];function u(){setTimeout(function(){for(var t=0;t<s.length;t++){var e=s[t],r=e.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),o.trigger(e.name,e.payload)}s.length=0},50)}function c(t,e,r){1===s.push({name:t,payload:{key:e._guidKey,id:e._id,eventName:t,detail:e._result,childId:r&&r._id,label:e._label,timeStamp:Date.now(),error:o["instrument-with-stack"]?new Error(e._label):null}})&&u()}function a(t,r){if(t&&"object"===e(t)&&t.constructor===this)return t;var n=new this(h,r);return O(n,t),n}function l(){return new TypeError("A promises callback cannot return that same promise.")}function f(t){var r=e(t);return null!==t&&("object"===r||"function"===r)}function h(){}var p=void 0,y=1,_=2,v={error:null};function d(t){try{return t.then}catch(e){return v.error=e,v}}var m=void 0;function b(){try{var t=m;return m=null,t.apply(this,arguments)}catch(e){return v.error=e,v}}function w(t){return m=t,b}function g(t,e,r){o.async(function(t){var n=!1,o=w(r).call(e,function(r){n||(n=!0,e===r?A(t,r):O(t,r))},function(e){n||(n=!0,T(t,e))},"Settle: "+(t._label||" unknown promise"));if(!n&&o===v){n=!0;var i=v.error;v.error=null,T(t,i)}},t)}function j(t,e){e._state===y?A(t,e._result):e._state===_?(e._onError=null,T(t,e._result)):S(e,void 0,function(r){e===r?A(t,r):O(t,r)},function(e){return T(t,e)})}function E(t,e,r){if(e.constructor===t.constructor&&r===M&&t.constructor.resolve===a)j(t,e);else if(r===v){var n=v.error;v.error=null,T(t,n)}else"function"==typeof r?g(t,e,r):A(t,e)}function O(t,e){t===e?A(t,e):f(e)?E(t,e,d(e)):A(t,e)}function x(t){t._onError&&t._onError(t._result),P(t)}function A(t,e){t._state===p&&(t._result=e,t._state=y,0===t._subscribers.length?o.instrument&&c("fulfilled",t):o.async(P,t))}function T(t,e){t._state===p&&(t._state=_,t._result=e,o.async(x,t))}function S(t,e,r,n){var i=t._subscribers,s=i.length;t._onError=null,i[s]=e,i[s+y]=r,i[s+_]=n,0===s&&t._state&&o.async(P,t)}function P(t){var e=t._subscribers,r=t._state;if(o.instrument&&c(r===y?"fulfilled":"rejected",t),0!==e.length){for(var n=void 0,i=void 0,s=t._result,u=0;u<e.length;u+=3)n=e[u],i=e[u+r],n?R(r,n,i,s):i(s);t._subscribers.length=0}}function R(t,e,r,n){var o="function"==typeof r,i=void 0;if(i=o?w(r)(n):n,e._state!==p);else if(i===e)T(e,l());else if(i===v){var s=v.error;v.error=null,T(e,s)}else o?O(e,i):t===y?A(e,i):t===_&&T(e,i)}function k(t,e){var r=!1;try{e(function(e){r||(r=!0,O(t,e))},function(e){r||(r=!0,T(t,e))})}catch(n){T(t,n)}}function M(t,e,r){var n=this._state;if(n===y&&!t||n===_&&!e)return o.instrument&&c("chained",this,this),this;this._onError=null;var i=new this.constructor(h,r),s=this._result;if(o.instrument&&c("chained",this,i),n===p)S(this,i,t,e);else{var u=n===y?t:e;o.async(function(){return R(n,i,u,s)})}return i}var C=function(){function t(t,e,r,n){this._instanceConstructor=t,this.promise=new t(h,n),this._abortOnReject=r,this._isUsingOwnPromise=t===L,this._isUsingOwnResolve=t.resolve===a,this._init.apply(this,arguments)}return t.prototype._init=function(t,e){var r=e.length||0;this.length=r,this._remaining=r,this._result=new Array(r),this._enumerate(e)},t.prototype._enumerate=function(t){for(var e=this.length,r=this.promise,n=0;r._state===p&&n<e;n++)this._eachEntry(t[n],n,!0);this._checkFullfillment()},t.prototype._checkFullfillment=function(){if(0===this._remaining){var t=this._result;A(this.promise,t),this._result=null}},t.prototype._settleMaybeThenable=function(t,e,r){var n=this._instanceConstructor;if(this._isUsingOwnResolve){var o=d(t);if(o===M&&t._state!==p)t._onError=null,this._settledAt(t._state,e,t._result,r);else if("function"!=typeof o)this._settledAt(y,e,t,r);else if(this._isUsingOwnPromise){var i=new n(h);E(i,t,o),this._willSettleAt(i,e,r)}else this._willSettleAt(new n(function(e){return e(t)}),e,r)}else this._willSettleAt(n.resolve(t),e,r)},t.prototype._eachEntry=function(t,r,n){null!==t&&"object"===e(t)?this._settleMaybeThenable(t,r,n):this._setResultAt(y,r,t,n)},t.prototype._settledAt=function(t,e,r,n){var o=this.promise;o._state===p&&(this._abortOnReject&&t===_?T(o,r):(this._setResultAt(t,e,r,n),this._checkFullfillment()))},t.prototype._setResultAt=function(t,e,r,n){this._remaining--,this._result[e]=r},t.prototype._willSettleAt=function(t,e,r){var n=this;S(t,void 0,function(t){return n._settledAt(y,e,t,r)},function(t){return n._settledAt(_,e,t,r)})},t}();function F(t,e,r){this._remaining--,this._result[e]=t===y?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function I(t,e){return Array.isArray(t)?new C(this,t,!0,e).promise:this.reject(new TypeError("Promise.all must be called with an array"),e)}function N(t,e){var r=new this(h,e);if(!Array.isArray(t))return T(r,new TypeError("Promise.race must be called with an array")),r;for(var n=0;r._state===p&&n<t.length;n++)S(this.resolve(t[n]),void 0,function(t){return O(r,t)},function(t){return T(r,t)});return r}function U(t,e){var r=new this(h,e);return T(r,t),r}var q="rsvp_"+Date.now()+"-",D=0;function K(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var L=function(){function t(e,r){this._id=D++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],o.instrument&&c("created",this),h!==e&&("function"!=typeof e&&K(),this instanceof t?k(this,e):G())}return t.prototype._onError=function(t){var e=this;o.after(function(){e._onError&&o.trigger("error",t,e._label)})},t.prototype.catch=function(t,e){return this.then(void 0,t,e)},t.prototype.finally=function(t,e){var r=this.constructor;return"function"==typeof t?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();function W(t,e){for(var r={},n=t.length,o=new Array(n),i=0;i<n;i++)o[i]=t[i];for(var s=0;s<e.length;s++){r[e[s]]=o[s+1]}return r}function Y(t){for(var e=t.length,r=new Array(e-1),n=1;n<e;n++)r[n-1]=t[n];return r}function $(t,e){return{then:function(r,n){return t.call(e,r,n)}}}function z(t,e){var r=function(){for(var r=arguments.length,n=new Array(r+1),o=!1,i=0;i<r;++i){var s=arguments[i];if(!o){if((o=J(s))===v){var u=v.error;v.error=null;var c=new L(h);return T(c,u),c}o&&!0!==o&&(s=$(o,s))}n[i]=s}var a=new L(h);return n[r]=function(t,r){t?T(a,t):void 0===e?O(a,r):!0===e?O(a,Y(arguments)):Array.isArray(e)?O(a,W(arguments,e)):O(a,r)},o?H(a,n,t,this):B(a,n,t,this)};return r.__proto__=t,r}function B(t,e,r,n){if(w(r).apply(n,e)===v){var o=v.error;v.error=null,T(t,o)}return t}function H(t,e,r,n){return L.all(e).then(function(e){return B(t,e,r,n)})}function J(t){return null!==t&&"object"===e(t)&&(t.constructor===L||d(t))}function Q(t,e){return L.all(t,e)}function V(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function X(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}exports.Promise=L,L.cast=a,L.all=I,L.race=N,L.resolve=a,L.reject=U,L.prototype._guidKey=q,L.prototype.then=M;var Z=function(t){function e(e,r,n){return V(this,t.call(this,e,r,!1,n))}return X(e,t),e}(C);function tt(t,e){return Array.isArray(t)?new Z(L,t,e).promise:L.reject(new TypeError("Promise.allSettled must be called with an array"),e)}function et(t,e){return L.race(t,e)}function rt(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function nt(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}Z.prototype._setResultAt=F;var ot=function(t){function e(e,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3];return rt(this,t.call(this,e,r,n,o))}return nt(e,t),e.prototype._init=function(t,e){this._result={},this._enumerate(e)},e.prototype._enumerate=function(t){var e=Object.keys(t),r=e.length,n=this.promise;this._remaining=r;for(var o=void 0,i=void 0,s=0;n._state===p&&s<r;s++)i=t[o=e[s]],this._eachEntry(i,o,!0);this._checkFullfillment()},e}(C);function it(t,r){return L.resolve(t,r).then(function(t){if(null===t||"object"!==e(t))throw new TypeError("Promise.hash must be called with an object");return new ot(L,t,r).promise})}function st(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function ut(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var ct=function(t){function e(e,r,n){return st(this,t.call(this,e,r,!1,n))}return ut(e,t),e}(ot);function at(t,r){return L.resolve(t,r).then(function(t){if(null===t||"object"!==e(t))throw new TypeError("hashSettled must be called with an object");return new ct(L,t,!1,r).promise})}function lt(t){throw setTimeout(function(){throw t}),t}function ft(t){var e={resolve:void 0,reject:void 0};return e.promise=new L(function(t,r){e.resolve=t,e.reject=r},t),e}function ht(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function pt(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}ct.prototype._setResultAt=F;var yt=function(t){function e(e,r,n,o){return ht(this,t.call(this,e,r,!0,o,n))}return pt(e,t),e.prototype._init=function(t,e,r,n,o){var i=e.length||0;this.length=i,this._remaining=i,this._result=new Array(i),this._mapFn=o,this._enumerate(e)},e.prototype._setResultAt=function(t,e,r,n){if(n){var o=w(this._mapFn)(r,e);o===v?this._settledAt(_,e,o.error,!1):this._eachEntry(o,e,!1)}else this._remaining--,this._result[e]=r},e}(C);function _t(t,e,r){return"function"!=typeof e?L.reject(new TypeError("map expects a function as a second argument"),r):L.resolve(t,r).then(function(t){if(!Array.isArray(t))throw new TypeError("map must be called with an array");return new yt(L,t,e,r).promise})}function vt(t,e){return L.resolve(t,e)}function dt(t,e){return L.reject(t,e)}function mt(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==e(r)&&"function"!=typeof r?t:r}function bt(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+e(r));t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var wt={},gt=function(t){function e(){return mt(this,t.apply(this,arguments))}return bt(e,t),e.prototype._checkFullfillment=function(){if(0===this._remaining&&null!==this._result){var t=this._result.filter(function(t){return t!==wt});A(this.promise,t),this._result=null}},e.prototype._setResultAt=function(t,e,r,n){if(n){this._result[e]=r;var o=w(this._mapFn)(r,e);o===v?this._settledAt(_,e,o.error,!1):this._eachEntry(o,e,!1)}else this._remaining--,r||(this._result[e]=wt)},e}(yt);function jt(t,e,r){return"function"!=typeof e?L.reject(new TypeError("filter expects function as a second argument"),r):L.resolve(t,r).then(function(t){if(!Array.isArray(t))throw new TypeError("filter must be called with an array");return new gt(L,t,e,r).promise})}var Et=0,Ot=void 0;function xt(t,e){Nt[Et]=t,Nt[Et+1]=e,2===(Et+=2)&&Dt()}var At="undefined"!=typeof window?window:void 0,Tt=At||{},St=Tt.MutationObserver||Tt.WebKitMutationObserver,Pt="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Rt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function kt(){var e=t.nextTick,r=t.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(r)&&"0"===r[1]&&"10"===r[2]&&(e=setImmediate),function(){return e(Ut)}}function Mt(){return void 0!==Ot?function(){Ot(Ut)}:It()}function Ct(){var t=0,e=new St(Ut),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){return r.data=t=++t%2}}function Ft(){var t=new MessageChannel;return t.port1.onmessage=Ut,function(){return t.port2.postMessage(0)}}function It(){return function(){return setTimeout(Ut,1)}}var Nt=new Array(1e3);function Ut(){for(var t=0;t<Et;t+=2){(0,Nt[t])(Nt[t+1]),Nt[t]=void 0,Nt[t+1]=void 0}Et=0}function qt(){try{var t=Function("return this")().require("vertx");return Ot=t.runOnLoop||t.runOnContext,Mt()}catch(e){return It()}}var Dt=void 0;Dt=Pt?kt():St?Ct():Rt?Ft():void 0===At&&"function"==typeof require?qt():It(),o.async=xt,o.after=function(t){return setTimeout(t,0)};var Kt=vt;exports.cast=Kt;var Gt=function(t,e){return o.async(t,e)};function Lt(){o.on.apply(o,arguments)}function Wt(){o.off.apply(o,arguments)}if(exports.async=Gt,"undefined"!=typeof window&&"object"===e(window.__PROMISE_INSTRUMENTATION__)){var Yt=window.__PROMISE_INSTRUMENTATION__;for(var $t in i("instrument",!0),Yt)Yt.hasOwnProperty($t)&&Lt($t,Yt[$t])}var zt={asap:xt,cast:Kt,Promise:L,EventTarget:n,all:Q,allSettled:tt,race:et,hash:it,hashSettled:at,rethrow:lt,defer:ft,denodeify:z,configure:i,on:Lt,off:Wt,resolve:vt,reject:dt,map:_t,async:Gt,filter:jt},Bt=zt;exports.default=Bt;
},{"process":"g5I+"}],"YQ/w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=o,exports.find=c,exports.default=void 0;var e=a(require("./chord-data")),r=require("../pcset"),t=require("rsvp");function a(e){return e&&e.__esModule?e:{default:e}}var n={all:o,find:c};let i;exports.default=n;const s=e=>{const t=e[0].split(" "),a=e[1],n=e[2].split(" "),i={name:a,intervals:t,abbreviatures:n},s=e=>-1!==t.indexOf(e);return i.quality=s("5A")?"Augmented":s("3M")?"Major":s("5d")?"Diminished":s("3m")?"Minor":null,i.chroma=(0,r.chroma)(t),i.setnum=parseInt(i.chroma,2),Object.freeze(i)},u=(e,r)=>(e.name||"").localeCompare(r.name);function o(){return i||(i=e.default.map(s).sort(u))}const m=Object.freeze({intervals:[],names:[]}),l=e=>"string"==typeof e;function c(e){if(!e&&""!==e)return m;l(e)?e={name:e,abbreviature:e,chroma:e}:Array.isArray(e)?e={intervals:e}:"number"==typeof e&&(e={setnum:e}),e.intervals&&(e.chroma=(0,r.chroma)(e.intervals));return o().find(r=>l(e.name)&&e.name===r.name||l(e.abbreviature)&&-1!==r.abbreviatures.indexOf(e.abbreviature)||e.chroma&&e.chroma===r.chroma||e.setnum&&e.setnum===r.setnum)||m}
},{"./chord-data":"bTgq","../pcset":"6tV8","rsvp":"+JJD"}],"H8fA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chord=s,exports.scale=c;var r=require("../chord-dictionary"),e=require("../note"),o=require("../array"),t=require("../pcset");function s(s){const c=void 0!==(s=(0,o.compact)(s.map(e.name))).find(r=>(0,e.props)(r).alt>0),i=s[0],n=(0,e.chroma)(i),a=[];return(0,t.modes)(s,!1).forEach((o,t)=>{const s=(0,r.find)(o);s.intervals.length&&function(r,o,t){const s=t-n?.5:1,u=1===s?"":"/"+i,p=(0,e.fromMidi)(t,{pitchClass:!0,sharps:c}),d=r.abbreviatures[0];a.push({tonic:p,name:d,mod:u,score:s})}(s,0,t)}),a.sort((r,e)=>e.score-r.score)}function c(r){}
},{"../chord-dictionary":"YQ/w","../note":"Oi/k","../array":"GVuH","../pcset":"6tV8"}],"K0yk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mixRGB=exports.toRGBA=exports.parseRGB=exports.range=void 0;var r=function(r,t){return Array(t-r+1).fill().map(function(t,o){return o+r})};exports.range=r;var t=function(r){if("string"!=typeof r||!r.match(/^#[0-9a-f]{6}$/i))return null;var t=r.toLowerCase();return{r:parseInt(t.substr(1,2),16),g:parseInt(t.substr(3,2),16),b:parseInt(t.substr(5,2),16)}};exports.parseRGB=t;var o=function(r,o){var a=t(r);return a?"rgba(".concat(a.r,",").concat(a.g,",").concat(a.b,",").concat(o,")"):"transparent"};exports.toRGBA=o;var a=function(r,o,a){var n=t(r),e=t(o);return n?e?"rgb(".concat(Math.floor(n.r*a+e.r*(1-a)),",").concat(Math.floor(n.g*a+e.g*(1-a)),",").concat(Math.floor(n.b*a+e.b*(1-a)),")"):"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(a,")"):o};exports.mixRGB=a;
},{}],"Qri1":[function(require,module,exports) {
"use strict";var r=Object.prototype.hasOwnProperty,t=Array.isArray,e=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),o=function(r){for(;r.length>1;){var e=r.pop(),o=e.obj[e.prop];if(t(o)){for(var n=[],c=0;c<o.length;++c)void 0!==o[c]&&n.push(o[c]);e.obj[e.prop]=n}}},n=function(r,t){for(var e=t&&t.plainObjects?Object.create(null):{},o=0;o<r.length;++o)void 0!==r[o]&&(e[o]=r[o]);return e},c=function e(o,c,u){if(!c)return o;if("object"!=typeof c){if(t(o))o.push(c);else{if(!o||"object"!=typeof o)return[o,c];(u&&(u.plainObjects||u.allowPrototypes)||!r.call(Object.prototype,c))&&(o[c]=!0)}return o}if(!o||"object"!=typeof o)return[o].concat(c);var p=o;return t(o)&&!t(c)&&(p=n(o,u)),t(o)&&t(c)?(c.forEach(function(t,n){if(r.call(o,n)){var c=o[n];c&&"object"==typeof c&&t&&"object"==typeof t?o[n]=e(c,t,u):o.push(t)}else o[n]=t}),o):Object.keys(c).reduce(function(t,o){var n=c[o];return r.call(t,o)?t[o]=e(t[o],n,u):t[o]=n,t},p)},u=function(r,t){return Object.keys(t).reduce(function(r,e){return r[e]=t[e],r},r)},p=function(r,t,e){var o=r.replace(/\+/g," ");if("iso-8859-1"===e)return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch(n){return o}},f=function(r,t,o){if(0===r.length)return r;var n=r;if("symbol"==typeof r?n=Symbol.prototype.toString.call(r):"string"!=typeof r&&(n=String(r)),"iso-8859-1"===o)return escape(n).replace(/%u[0-9a-f]{4}/gi,function(r){return"%26%23"+parseInt(r.slice(2),16)+"%3B"});for(var c="",u=0;u<n.length;++u){var p=n.charCodeAt(u);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122?c+=n.charAt(u):p<128?c+=e[p]:p<2048?c+=e[192|p>>6]+e[128|63&p]:p<55296||p>=57344?c+=e[224|p>>12]+e[128|p>>6&63]+e[128|63&p]:(u+=1,p=65536+((1023&p)<<10|1023&n.charCodeAt(u)),c+=e[240|p>>18]+e[128|p>>12&63]+e[128|p>>6&63]+e[128|63&p])}return c},i=function(r){for(var t=[{obj:{o:r},prop:"o"}],e=[],n=0;n<t.length;++n)for(var c=t[n],u=c.obj[c.prop],p=Object.keys(u),f=0;f<p.length;++f){var i=p[f],a=u[i];"object"==typeof a&&null!==a&&-1===e.indexOf(a)&&(t.push({obj:u,prop:i}),e.push(a))}return o(t),r},a=function(r){return"[object RegExp]"===Object.prototype.toString.call(r)},s=function(r){return!(!r||"object"!=typeof r)&&!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))},l=function(r,t){return[].concat(r,t)};module.exports={arrayToObject:n,assign:u,combine:l,compact:i,decode:p,encode:f,isBuffer:s,isRegExp:a,merge:c};
},{}],"XaX2":[function(require,module,exports) {
"use strict";var r=String.prototype.replace,t=/%20/g,e=require("./utils"),n={RFC1738:"RFC1738",RFC3986:"RFC3986"};module.exports=e.assign({default:n.RFC3986,formatters:{RFC1738:function(e){return r.call(e,t,"+")},RFC3986:function(r){return String(r)}}},n);
},{"./utils":"Qri1"}],"mwZo":[function(require,module,exports) {
"use strict";var e=require("./utils"),t=require("./formats"),r=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Array.isArray,i=Array.prototype.push,l=function(e,t){i.apply(e,n(t)?t:[t])},a=Date.prototype.toISOString,s=t.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:e.encode,encodeValuesOnly:!1,format:s,formatter:t.formatters[s],indices:!1,serializeDate:function(e){return a.call(e)},skipNulls:!1,strictNullHandling:!1},c=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e},u=function t(r,o,i,a,s,u,d,y,p,m,h,v,b){var w=r;if("function"==typeof d?w=d(o,w):w instanceof Date?w=m(w):"comma"===i&&n(w)&&(w=w.join(",")),null===w){if(a)return u&&!v?u(o,f.encoder,b,"key"):o;w=""}if(c(w)||e.isBuffer(w))return u?[h(v?o:u(o,f.encoder,b,"key"))+"="+h(u(w,f.encoder,b,"value"))]:[h(o)+"="+h(String(w))];var D,g=[];if(void 0===w)return g;if(n(d))D=d;else{var k=Object.keys(w);D=y?k.sort(y):k}for(var N=0;N<D.length;++N){var O=D[N];s&&null===w[O]||(n(w)?l(g,t(w[O],"function"==typeof i?i(o,O):o,i,a,s,u,d,y,p,m,h,v,b)):l(g,t(w[O],o+(p?"."+O:"["+O+"]"),i,a,s,u,d,y,p,m,h,v,b)))}return g},d=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var o=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=t.default;if(void 0!==e.format){if(!r.call(t.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var l=t.formatters[i],a=f.filter;return("function"==typeof e.filter||n(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:o,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:a,formatter:l,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}};module.exports=function(e,t){var r,i=e,a=d(t);"function"==typeof a.filter?i=(0,a.filter)("",i):n(a.filter)&&(r=a.filter);var s,f=[];if("object"!=typeof i||null===i)return"";s=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var c=o[s];r||(r=Object.keys(i)),a.sort&&r.sort(a.sort);for(var y=0;y<r.length;++y){var p=r[y];a.skipNulls&&null===i[p]||l(f,u(i[p],p,c,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.formatter,a.encodeValuesOnly,a.charset))}var m=f.join(a.delimiter),h=!0===a.addQueryPrefix?"?":"";return a.charsetSentinel&&("iso-8859-1"===a.charset?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),m.length>0?h+m:""};
},{"./utils":"Qri1","./formats":"XaX2"}],"snX5":[function(require,module,exports) {
"use strict";var e=require("./utils"),t=Object.prototype.hasOwnProperty,r=Array.isArray,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:e.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},a="utf8=%26%2310003%3B",n="utf8=%E2%9C%93",l=function(l,c){var s,p={},d=c.ignoreQueryPrefix?l.replace(/^\?/,""):l,u=c.parameterLimit===1/0?void 0:c.parameterLimit,f=d.split(c.delimiter,u),m=-1,y=c.charset;if(c.charsetSentinel)for(s=0;s<f.length;++s)0===f[s].indexOf("utf8=")&&(f[s]===n?y="utf-8":f[s]===a&&(y="iso-8859-1"),m=s,s=f.length);for(s=0;s<f.length;++s)if(s!==m){var h,b,g=f[s],O=g.indexOf("]="),v=-1===O?g.indexOf("="):O+1;-1===v?(h=c.decoder(g,i.decoder,y,"key"),b=c.strictNullHandling?null:""):(h=c.decoder(g.slice(0,v),i.decoder,y,"key"),b=c.decoder(g.slice(v+1),i.decoder,y,"value")),b&&c.interpretNumericEntities&&"iso-8859-1"===y&&(b=o(b)),b&&"string"==typeof b&&c.comma&&b.indexOf(",")>-1&&(b=b.split(",")),g.indexOf("[]=")>-1&&(b=r(b)?[b]:b),t.call(p,h)?p[h]=e.combine(p[h],b):p[h]=b}return p},c=function(e,t,r){for(var i=t,o=e.length-1;o>=0;--o){var a,n=e[o];if("[]"===n&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var l="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,c=parseInt(l,10);r.parseArrays||""!==l?!isNaN(c)&&n!==l&&String(c)===l&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(a=[])[c]=i:a[l]=i:a={0:i}}i=a}return i},s=function(e,r,i){if(e){var o=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,n=i.depth>0&&/(\[[^[\]]*])/.exec(o),l=n?o.slice(0,n.index):o,s=[];if(l){if(!i.plainObjects&&t.call(Object.prototype,l)&&!i.allowPrototypes)return;s.push(l)}for(var p=0;i.depth>0&&null!==(n=a.exec(o))&&p<i.depth;){if(p+=1,!i.plainObjects&&t.call(Object.prototype,n[1].slice(1,-1))&&!i.allowPrototypes)return;s.push(n[1])}return n&&s.push("["+o.slice(n.index)+"]"),c(s,r,i)}},p=function(t){if(!t)return i;if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var r=void 0===t.charset?i.charset:t.charset;return{allowDots:void 0===t.allowDots?i.allowDots:!!t.allowDots,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:i.allowPrototypes,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:i.arrayLimit,charset:r,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:i.comma,decoder:"function"==typeof t.decoder?t.decoder:i.decoder,delimiter:"string"==typeof t.delimiter||e.isRegExp(t.delimiter)?t.delimiter:i.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:i.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:i.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:i.plainObjects,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:i.strictNullHandling}};module.exports=function(t,r){var i=p(r);if(""===t||null==t)return i.plainObjects?Object.create(null):{};for(var o="string"==typeof t?l(t,i):t,a=i.plainObjects?Object.create(null):{},n=Object.keys(o),c=0;c<n.length;++c){var d=n[c],u=s(d,o[d],i);a=e.merge(a,u,i)}return e.compact(a)};
},{"./utils":"Qri1"}],"hIRQ":[function(require,module,exports) {
"use strict";var r=require("./stringify"),e=require("./parse"),s=require("./formats");module.exports={formats:s,parse:e,stringify:r};
},{"./stringify":"mwZo","./parse":"snX5","./formats":"XaX2"}],"Q9a9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSetting=a,exports.setSetting=d,exports.initSettings=f;var e=require("./midi"),t=require("./ui"),r=n(require("qs"));function n(e){return e&&e.__esModule?e:{default:e}}var i={midiIn:null,noteStart:"C3",noteEnd:"C5",latinNotationEnabled:!1,pitchWheelEnabled:!0,modWheelEnabled:!0,colorNote:"#bf3a2b",colorPitchWheelDown:"#bf3a2b",colorPitchWheelUp:"#44ffaa",colorModWheel:"#44bbff",hideKeyboard:!1,hideNotes:!1,hideChord:!1,hideBassNote:!1,hideKeyName:!1,hideTonic:!1},o={};function a(e){return void 0!==o[e]?o[e]:i[e]}function d(e,t){o[e]=t,l()}function u(e,t,r){if(!Number.isNaN(Number(e)))return Number(e);if("true"===e)return!0;if("false"===e)return!1;var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(i){return n}}function c(){var e=r.default.parse(window.location.search,{depth:0,parseArrays:!1,ignoreQueryPrefix:!0,decoder:u});Object.assign(o,e)}function l(){var e=r.default.stringify(o,{addQueryPrefix:!0});window.history.pushState(o,"settings update",e)}function s(r,n){if("midiIn"===r)return(0,e.selectMIDIIn)(n),void(0,t.render)(!0);var i=n.target;"checkbox"===i.type&&d(r,!!i.checked),"text"!==i.type&&"color"!==i.type||d(r,i.value),(0,t.render)()}function f(){c();for(var e=0,t=Object.keys(i);e<t.length;e++){var r=t[e],n=document.getElementById(r);"checkbox"===n.type&&(n.checked=a(r)),"text"!==n.type&&"color"!==n.type||(n.value=a(r)),n.addEventListener("input",s.bind(null,r))}}
},{"./midi":"yqcC","./ui":"Bj9A","qs":"hIRQ"}],"jBxF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateKeyboard=C,exports.setPitchWheel=M,exports.setModWheel=T,exports.render=q;var t=n(require("tonal/note")),e=require("./utils"),o=require("./settings");function n(t){return t&&t.__esModule?t:{default:t}}var r=document.getElementById("keyboard"),c=5,a=40,i=150,s=22,l=90,d=5,f=30,h=2,p=10,u=5,m=10,w=a,g=i,x=2*i-80,y="#222222",b=function(t,e,o){return'<g id="note-'.concat(t.midi,'" class="note white" transform="translate(').concat(e,',0)" style="color: ').concat(o,';">\n  <rect class="piano-key" width="').concat(a,'" height="').concat(i+c,'" x="0" y="').concat(-c,'" rx="').concat(c,'" ry="').concat(c,'"></rect>\n  <circle class="piano-tonic" cx="').concat(a/2,'" cy="').concat(i-f,'" r="').concat(d,'"></circle>\n  <text class="piano-key-name" x="').concat(a/2,'" y="').concat(i-h,'" text-anchor="middle">').concat(t.name,"</text>\n</g>")},v=function(t,e,o){return'<g id="note-'.concat(t.midi,'" class="note black" transform="translate(').concat(e-s/2,',0)" style="color: ').concat(o,';">\n  <rect class="piano-key" width="').concat(s,'" height="').concat(l+c,'" x="0" y="').concat(-c,'" rx="').concat(c,'" ry="').concat(c,'"></rect>\n  <circle class="piano-tonic" cx="').concat(s/2,'" cy="').concat(l-f,'" r="').concat(d,'"></circle>\n</g>')},S=function(t,e){return'<g id="'.concat(t,'" transform="translate(').concat(e,',0)">\n  <rect class="wheelSocket" width="').concat(w,'" height="').concat(g,'" rx="').concat(p,'" ry="').concat(p,'" />\n  <g transform="translate(').concat(u,',0)" clip-path="url(#wheelClip)">\n    <rect class="wheel" transform="translate(0, ').concat(-g/2,')" width="').concat(w-2*u,'" height="').concat(2*g,'"></rect>\n  </g>\n</g>\n')},k=function(t,e){return'<svg width="100%" viewBox="'.concat(-e.width," 0 ").concat(t.width+e.width," ").concat(t.height,'" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <filter id="insetKey">                                                            \x3c!-- source: https://www.xanthir.com/b4Yv0 --\x3e\n      <feOffset dx="0" dy="-7"/>                                                          \x3c!-- Shadow Offset --\x3e\n      <feGaussianBlur stdDeviation="5" result="offset-blur"/>                            \x3c!-- Shadow Blur --\x3e\n      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/> \x3c!-- Invert the drop shadow to create an inner shadow --\x3e\n      <feFlood flood-color="black" flood-opacity="0.4" result="color"/>                   \x3c!-- Color & Opacity --\x3e\n      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>               \x3c!-- Clip color inside shadow --\x3e\n      <feComponentTransfer in="shadow" result="shadow">                                   \x3c!-- Shadow Opacity --\x3e\n        <feFuncA type="linear" slope="5"/>\n      </feComponentTransfer>\n      <feBlend mode="soft-light" in="shadow" in2="SourceGraphic"/>                        \x3c!-- Put shadow over original object --\x3e\n    </filter>\n    <filter id="insetWheel">                                                            \x3c!-- source: https://www.xanthir.com/b4Yv0 --\x3e\n      <feOffset dx="0" dy="0"/>                                                          \x3c!-- Shadow Offset --\x3e\n      <feGaussianBlur stdDeviation="2" result="offset-blur"/>                            \x3c!-- Shadow Blur --\x3e\n      <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"/> \x3c!-- Invert the drop shadow to create an inner shadow --\x3e\n      <feFlood flood-color="black" flood-opacity="1" result="color"/>                   \x3c!-- Color & Opacity --\x3e\n      <feComposite operator="in" in="color" in2="inverse" result="shadow"/>               \x3c!-- Clip color inside shadow --\x3e\n      <feComponentTransfer in="shadow" result="shadow">                                   \x3c!-- Shadow Opacity --\x3e\n        <feFuncA type="linear" slope="1.5"/>\n      </feComponentTransfer>\n      <feBlend mode="normal" in="shadow" in2="SourceGraphic" />\n    </filter>\n    <linearGradient id="whiteKey" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#bbbbbb" />\n      <stop offset="8%"  stop-color="#eeeeee" />\n      <stop offset="90%" stop-color="#ffffff" />\n      <stop offset="91%" stop-color="#eeeeee" />\n    </linearGradient>\n    <linearGradient id="blackKey" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#000000" />\n      <stop offset="16%" stop-color="#222222" />\n      <stop offset="80%" stop-color="#444444" />\n      <stop offset="80.5%" stop-color="#aaaaaa" />\n      <stop offset="85%" stop-color="#222222" />\n      <stop offset="91%" stop-color="#000000" />\n    </linearGradient>\n    <linearGradient id="wheelGradient" gradientTransform="rotate(90)">\n      <stop offset="0%"  stop-color="#000000" />\n      <stop offset="45%" stop-color="#555555" />\n      <stop offset="46%" stop-color="#111111" />\n      <stop offset="49.5%" stop-color="#333333" />\n      <stop offset="50%" stop-color="#bbbbbb" />\n      <stop offset="50.5%" stop-color="#444444" />\n      <stop offset="51%" stop-color="#555555" />\n      <stop offset="54%" stop-color="#666666" />\n      <stop offset="55%" stop-color="#333333" />\n      <stop offset="91%" stop-color="#000000" />\n    </linearGradient>\n    \n    <clipPath id="wheelClip">\n      <rect width="').concat(w-2*u,'" height="').concat(g-2,'" y="1" rx="').concat(p/2,'" ry="').concat(p/2,'" />\n    </clipPath>\n  </defs>\n\n  <g id="wheels" transform="translate(').concat(-e.width,',0)">\n    ').concat(e.markup,'\n  </g>\n\n  <g id="board" transform="translate(0,0)">\n    <rect id="keyboard-bg" width="').concat(t.width,'" height="').concat(t.height,'" x="0" y="0" />\n    ').concat(t.markup,'\n    <rect id="board-border" width="').concat(t.width,'" height="').concat(t.height,'" x="0" y="0" />\n  </g>\n</svg>\n')};function W(t){return t.reduce(function(t,e){var o=S(e,t.width);return{width:t.width+w+m,height:t.height,markup:t.markup+o}},{width:0,height:g,markup:""})}function G(e,o,n,r){var c=t.default.fromMidi(e,{sharps:!0}),i=t.default.props(c);return i.alt?{width:0,isWhite:!1,markup:v(i,o,r)}:{width:a,isWhite:!0,markup:b(i,o,n)}}function C(o,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["pitchWheel","modWheel"],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#bf3a2b",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#bf3a2b",s=t.default.props(t.default.simplify(o)),l=t.default.props(t.default.simplify(n)),d=s.name&&s.midi?s.alt?s.midi-1:s.midi:t.default.midi("C2"),f=l.name&&l.midi?l.alt?l.midi+1:l.midi:t.default.midi("C5"),h=Math.min(d,f),p=Math.max(d,f),u=(0,e.range)(h,p).reduce(function(t,e){var o=G(e,t.width,c,a),n=o.width,r=o.isWhite,i=o.markup;return{width:t.width+n,height:t.height,markup:r?i+t.markup:t.markup+i}},{width:0,height:i,markup:""}),m=W(r);return k(u,m)}var B=0,O=0;function M(t){if(B=t,(0,o.getSetting)("pitchWheelEnabled")){var n=document.querySelector("#pitchWheel .wheelSocket"),r=document.querySelector("#pitchWheel .wheel"),c=(0,o.getSetting)("colorPitchWheelDown"),a=(0,o.getSetting)("colorPitchWheelUp"),i=-g/2-t*(x/4);r.setAttribute("transform","translate(0, ".concat(i,")")),n.style.fill=t>0?(0,e.mixRGB)(a,y,t):(0,e.mixRGB)(c,y,-t)}}function T(t){if(O=t,(0,o.getSetting)("modWheelEnabled")){var n=document.querySelector("#modWheel .wheelSocket"),r=document.querySelector("#modWheel .wheel"),c=(0,o.getSetting)("colorModWheel"),a=-(g-x/2)/2-t*(x/2);r.setAttribute("transform","translate(0, ".concat(a,")")),n.style.fill=(0,e.mixRGB)(c,y,t)}}function q(t){var n=(0,o.getSetting)("noteStart"),c=(0,o.getSetting)("noteEnd"),a=(0,o.getSetting)("pitchWheelEnabled"),i=(0,o.getSetting)("modWheelEnabled"),s=(0,o.getSetting)("colorNote"),l=(0,e.mixRGB)(s,"#ffffff",.4),d=s,f=[];a&&f.push("pitchWheel"),i&&f.push("modWheel"),r.innerHTML=C(n,c,f,l,d),t?(M(0),T(0)):(M(B),T(O))}
},{"tonal/note":"Oi/k","./utils":"K0yk","./settings":"Q9a9"}],"Bj9A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.highlightNote=d,exports.fadeNote=l,exports.highlightTonic=u,exports.fadeTonics=f,exports.setChordHtml=h,exports.setNotesHtml=m,exports.setLayoutSettings=p,exports.setAppLoaded=y,exports.setAppError=v,exports.render=g,Object.defineProperty(exports,"setPitchWheel",{enumerable:!0,get:function(){return n.setPitchWheel}}),Object.defineProperty(exports,"setModWheel",{enumerable:!0,get:function(){return n.setModWheel}});var e=o(require("tonal/note")),t=require("./utils"),r=require("./settings"),n=require("./keyboard");function o(e){return e&&e.__esModule?e:{default:e}}var i=["hideKeyboard","hideNotes","hideChord","hideBassNote","hideKeyName","hideTonic"],s=document.getElementById("app"),a=document.getElementById("chord"),c=document.getElementById("notes");function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active",r=document.getElementById("note-".concat(e));r&&r.classList.add(t)}function l(e){var t=document.getElementById("note-".concat(e));t&&t.classList.remove("active")}function u(r){var n=(0,t.range)(0,10).map(function(t){return e.default.midi("".concat(r).concat(t))}),o=!0,i=!1,s=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){d(a.value,"tonic")}}catch(l){i=!0,s=l}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}}function f(){var e=document.querySelectorAll(".tonic");if(e&&e.length){var t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.classList.remove("tonic")}}catch(s){r=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}}function h(e){a.innerHTML=e}function m(e){c.innerHTML=e}function p(){for(var e=0,t=i;e<t.length;e++){var n=t[e];(0,r.getSetting)(n)?s.classList.add(n):s.classList.remove(n)}}function y(e){s.classList.add("loaded")}function v(e){s.classList.add("error"),h("Error"),m(e)}function g(e){p(),(0,n.render)(e)}
},{"tonal/note":"Oi/k","./utils":"K0yk","./settings":"Q9a9","./keyboard":"jBxF"}],"X9aa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chordToHtml=o,exports.keyToHtml=s;var n=e(require("tonal/note")),t=require("./settings");function e(n){return n&&n.__esModule?n:{default:n}}var a='<span class="flat">♭</span>',c='<span class="sharp">♯</span>',r={C:"Do",D:"Ré",E:"Mi",F:"Fa",G:"Sol",A:"La",B:"Si"};function o(n){return'\n      <span class="key">'.concat(s(n.tonic),'</span>\n      <span class="chordname">').concat(l(n.name),'</span><span class="bassnote">').concat(i(n.mod),"</span>\n    ")}function s(t){var e=n.default.tokenize(t);return"".concat(p(e[0])).concat(u(e[1])).concat(e[2]).concat(e[3])}function u(n){return n?"#"===n?c:"b"===n?a:n:""}function l(n){return f(n).replace(/b(\d)/g,"".concat(a,"$1")).replace(/#/g,c)}function i(n){if(!n)return"";var t=n.replace(/^\//,"");return"/".concat(s(t).replace(/b(\d)/g,"".concat(a,"$1")).replace(/#/g,c))}function p(n){return(0,t.getSetting)("latinNotationEnabled")?r[n]:n}function f(n){return"M"===n.substr(0,1)?n.substr(1):n}
},{"tonal/note":"Oi/k","./settings":"Q9a9"}],"Rgfk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noteOn=u,exports.noteOff=d,exports.pitchWheel=p,exports.modWheel=a,exports.polyPressure=exports.controller=void 0;var e=l(require("tonal/note")),o=require("tonal/detect"),t=require("./ui"),r=require("./chords");function l(e){return e&&e.__esModule?e:{default:e}}var n=[],i=0,s=0,c=null;function u(e){n.includes(e)||(n.push(e),(0,t.highlightNote)(e)),n.sort(),f()}function d(e){var o=n.indexOf(e);o>-1&&(n.splice(o,1),(0,t.fadeNote)(e)),f()}function p(e){i=e,(0,t.setPitchWheel)(e)}function a(e){s=e,(0,t.setModWheel)(s)}function h(){var e;(e=console).log.apply(e,arguments)}function f(){var l=n.map(e.default.fromMidi).map(e.default.pc),i=l.length>2?(0,o.chord)(l):[];if((0,t.setNotesHtml)(l.map(r.keyToHtml).join(" ")),i&&i.length){var s=i[0];(0,t.setChordHtml)((0,r.chordToHtml)(s)),c&&(0,t.fadeTonics)(),(0,t.highlightTonic)(s.tonic),c=s}else(0,t.setChordHtml)(""),(0,t.fadeTonics)()}var v=h.bind(void 0,"controller");exports.controller=v;var m=h.bind(void 0,"polyPressure");exports.polyPressure=m;
},{"tonal/note":"Oi/k","tonal/detect":"H8fA","./ui":"Bj9A","./chords":"X9aa"}],"yqcC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectMIDIIn=m,exports.initializeMidi=x;var e=require("./events"),t=require("./ui"),n=require("./settings"),o=["mpk","key","piano"],i=8,a=9,r=10,s=11,c=14,l=1;function d(t){var n=t.data[0]>>4,o=15&t.data[0],d=t.data[1],u=t.data[2];9!==o&&(n===i||n===a&&0===u?(0,e.noteOff)(d):n===a?(0,e.noteOn)(d,u/127):n===s?d===l?(0,e.modWheel)(u/127):(0,e.controller)(d,u/127):n===c?(0,e.pitchWheel)((128*u+d-8192)/8192):n===r?(0,e.polyPressure)(d,u/127):console.log(t.data[0]+" "+t.data[1]+" "+t.data[2]))}var u=null,p=null,g=null;function m(e){g&&(g.onmidimessage=null);var t=e.target[e.target.selectedIndex].value;(g="function"==typeof p.inputs?p.inputs()[e.target.selectedIndex]:p.inputs.get(t))&&(g.onmidimessage=d),(0,n.setSetting)("midiIn",g.name.toString())}function v(){var e=(0,n.getSetting)("midiIn");u.options.length=0,g&&"disconnected"==g.state&&(g=null);for(var t=null,i=p.inputs.values(),a=i.next();a&&!a.done;a=i.next()){var r=(a=a.value).name.toString();t||(t=a);var s=!1;g&&g===a&&(s=!0),!g&&e&&-1!==r.toLowerCase().indexOf(e.toLowerCase())&&(s=!0);for(var c=0,l=o;c<l.length;c++){var m=l[c];g||-1===r.toLowerCase().indexOf(m)||(s=!0)}u.appendChild(new Option(a.name,a.id,s,s)),s&&((g=a).onmidimessage=d)}g||(g=t)&&(g.onmidimessage=d)}function I(e){console.log("connection: ".concat(e.port.name," ").concat(e.port.connection," ").concat(e.port.state)),v()}function f(e){p=e,(0,t.setAppLoaded)(),u=document.getElementById("midiIn"),e.onstatechange=I,v()}function h(e){(0,t.setAppError)("Cannot initialize MIDI"),console.log("MIDI not initialized - error encountered: ".concat(e.code))}function x(){navigator.requestMIDIAccess?navigator.requestMIDIAccess().then(f,h):showError()}
},{"./events":"Rgfk","./ui":"Bj9A","./settings":"Q9a9"}],"H99C":[function(require,module,exports) {
"use strict";require("./styles.css");var i=require("./midi"),e=require("./settings"),r=require("./ui"),s=!1;(0,e.initSettings)(),s||((0,i.initializeMidi)(),s=!0),(0,r.render)();
},{"./styles.css":"D9Nj","./midi":"yqcC","./settings":"Q9a9","./ui":"Bj9A"}]},{},["H99C"], null)
//# sourceMappingURL=src.a1c16f80.js.map